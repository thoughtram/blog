{"componentChunkName":"component---src-templates-blog-post-js","path":"/rx/2016/08/01/exploring-rx-operators-flatmap.html","webpackCompilationHash":"0c5d630095500f933ccd","result":{"data":{"site":{"siteMetadata":{"title":"Articles by thoughtram","authors":[{"id":"pascal_precht","name":"Pascal Precht","twitter":"PascalPrecht","img":"https://avatars2.githubusercontent.com/u/445106?s=460&v=4"},{"id":"christoph_burgdorf","name":"Christoph Burgdorf","twitter":"cburgdorf","img":"https://avatars0.githubusercontent.com/u/521109?s=460&v=4"},{"id":"dominic_elm","name":"Dominic Elm","twitter":"d3lm","img":"https://avatars0.githubusercontent.com/u/12571019?s=400&v=4"},{"id":"thomas_burleson","name":"Thomas Burleson","twitter":"thomasburleson","img":"https://avatars3.githubusercontent.com/u/210413?s=400&v=4"},{"id":"elvira_eulitz","name":"Elvira Eulitz","twitter":"ElviraEulitz","img":"https://avatars3.githubusercontent.com/u/29247040?s=400&v=4"},{"id":"maxim_koretskyi","name":"Maxim Koretskyi","twitter":"maxim_koretskyi","img":"https://avatars3.githubusercontent.com/u/6124091?s=400&v=4"}]}},"markdownRemark":{"id":"aaa658ad-0f10-53e8-8885-a440dd2f46fa","excerpt":"This is another post in a series of articles to discover the magic of different Rx operators. In our last article, Exploring Rx Operators: map we learned how we…","html":"<p>This is another post in a series of articles to discover the magic of different Rx operators. In our last article, <a href=\"/angular/2016/05/16/exploring-rx-operators-map.html\">Exploring Rx Operators: map</a> we learned how we can map the notifications of Observables to create other more meaningful Observables.</p>\n<p>Today we like to move our attention to another very important and also related operator, namely <code class=\"language-text\">flatMap</code>. In the same way that the <code class=\"language-text\">map</code> operator is closely related to the <code class=\"language-text\">map</code> function that we know from Arrays, <code class=\"language-text\">flatMap</code> should sound familiar to many people who worked with collections in a functional programming kind of way. In fact, the similarity is so strong that it makes sense to first move our attention to a collection based example.</p>\n<h2>Understanding <code class=\"language-text\">flatMap</code> for collections</h2>\n<p>Consider the following collection of invoices where each invoice has a property <code class=\"language-text\">positions</code> holding the individual items of the invoice. That’s a pretty common (yet simplified) structure of pretty much every e-commerce system out there.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> invoices <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\n    id<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n    date<span class=\"token punctuation\">:</span> <span class=\"token string\">'07-29-2016'</span><span class=\"token punctuation\">,</span>\n    customerId<span class=\"token punctuation\">:</span> <span class=\"token number\">4711</span><span class=\"token punctuation\">,</span>\n    positions<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">{</span> id<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> title<span class=\"token punctuation\">:</span> <span class=\"token string\">'Superhero shirt'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span> id<span class=\"token punctuation\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> title<span class=\"token punctuation\">:</span> <span class=\"token string\">'Batman mask'</span> <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">{</span>\n    id<span class=\"token punctuation\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n    date<span class=\"token punctuation\">:</span> <span class=\"token string\">'07-29-2016'</span><span class=\"token punctuation\">,</span>\n    customerId<span class=\"token punctuation\">:</span> <span class=\"token number\">4712</span><span class=\"token punctuation\">,</span>\n    positions<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">{</span> id<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> title<span class=\"token punctuation\">:</span> <span class=\"token string\">'Batman car'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span> id<span class=\"token punctuation\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> title<span class=\"token punctuation\">:</span> <span class=\"token string\">'Spiderman suit'</span> <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n<p>What if we are interested in a collection of all <em>positions</em>? Of course we could simply loop through all invoices and push the positions into a new shared collection.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> positions <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> inv <span class=\"token keyword\">of</span> invoices<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  positions<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>inv<span class=\"token punctuation\">.</span>positions<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>positions<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>But <a href=\"http://jsbin.com/ziveloviqa/edit?js,console\">that’s</a> very imperative and focuses a lot on the actual implementation. What we rather like to have is a declarative solution that focuses on <em>what</em> we want to achieve. Coming from a collection of invoices, we want to retrieve a collection of positions.  </p>\n<p>In the functional programming world there’s a <code class=\"language-text\">flatMap</code> function for exactly this use case.</p>\n<p>Unfortunately native JavaScript Arrays don’t have a <code class=\"language-text\">flatMap</code> function yet. However, we can reach for the popular <a href=\"http://lodash.com\">lodash</a> library and rewrite the code to use <code class=\"language-text\">flatMap</code> with that.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> positions <span class=\"token operator\">=</span> _<span class=\"token punctuation\">.</span><span class=\"token function\">flatMap</span><span class=\"token punctuation\">(</span>invoices<span class=\"token punctuation\">,</span> <span class=\"token parameter\">inv</span> <span class=\"token operator\">=></span> inv<span class=\"token punctuation\">.</span>positions<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>positions<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>We just <a href=\"http://jsbin.com/cuwowuliru/edit?html,js,console\">replaced</a> four lines of code with a single one that is far easier to follow. This declarative solution doesn’t move our intention to the actual implementation. We don’t even know whether it’s using a for loop behind the scenes or not. Once you become familar with the vocabulary the code becomes much easier to understand then it’s imperative counterpart. Pretty neat, no?</p>\n<p>What <code class=\"language-text\">flatMap</code> does is, it goes through each invoice in our collection and applies our function which maps to the array of positions. It then flattens all the positions into a single collection, hence the name <code class=\"language-text\">flatMap</code>. Just to make it very clear: A simple <code class=\"language-text\">map</code> isn’t suitable here because it would leave us with an array of arrays which is not quite what we want.</p>\n<p>By now you may be wondering what this has to do with <code class=\"language-text\">flatMap</code> from the Rx library. The good news is, if you’ve understand the example above, understanding <code class=\"language-text\">flatMap</code> for Observables isn’t a far stretch. In fact, it’s very similar.</p>\n<h2>Understanding <code class=\"language-text\">flatMap</code> for Observables</h2>\n<p>Remember that Observables are very much like collections with the difference that items are <em>pushed</em> to us as they arrive instead of being pulled out. In our example above we had a collection of invoices where each invoice had a collection of positions. Can we have an Observable of invoices where each invoice has an Observable of positions? Well, we could make that up but it would suggest that we have invoices where the positions may arrive asynchronously.</p>\n<p>A better suited example may be an Observable of tweets where each tweet has an Observable of like actions. A <code class=\"language-text\">LikeAction</code> is a simple enum with two variants <code class=\"language-text\">Like</code> and <code class=\"language-text\">Unlike</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">enum</span> LikeAction <span class=\"token punctuation\">{</span>\n  Like <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n  Unlike <span class=\"token operator\">=</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>We can assign the values <code class=\"language-text\">1</code> and <code class=\"language-text\">-1</code> to the variants so that we can easily accumulate a total count of them later.</p>\n<p>A <code class=\"language-text\">Tweet</code> is a simple class with a <code class=\"language-text\">text</code> property of type <code class=\"language-text\">string</code> and a <code class=\"language-text\">likes</code> property of type <code class=\"language-text\">Observable&lt;LikeAction&gt;</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Tweet</span> <span class=\"token punctuation\">{</span>\n  likes <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Rx<span class=\"token punctuation\">.</span>Subject</span><span class=\"token operator\">&lt;</span>LikeAction<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">constructor</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token keyword\">public</span> text<span class=\"token punctuation\">:</span> string</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Don’t get confused by the use of <code class=\"language-text\">Subject</code> here. A subject is an <code class=\"language-text\">Observable</code> that one can not only subscribe to but also raise notifications on which is exactly what we need to mock the actions.</p>\n<p>Now that we have our basic models we can create an <code class=\"language-text\">Observable&lt;Tweet&gt;</code> and save a reference to it. Again, we’re using <code class=\"language-text\">Subject</code> for the purpose of mocking out our notifications.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> tweets <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Rx<span class=\"token punctuation\">.</span>Subject</span><span class=\"token operator\">&lt;</span>Tweet<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Tweets are pushed through the <code class=\"language-text\">Observable&lt;Tweet&gt;</code> as they arrive. Whenever someone likes or unlikes a tweet the <code class=\"language-text\">Observable&lt;LikeAction&gt;</code> on that tweet pushes a new notification.</p>\n<p>To make a tweet we have to create an instance of <code class=\"language-text\">Tweet</code> and pass it to <code class=\"language-text\">next</code> on our tweets <code class=\"language-text\">Subject</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> firstTweet <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Tweet</span><span class=\"token punctuation\">(</span><span class=\"token string\">'first tweet'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ntweets<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span>firstTweet<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Adding or removing likes is as simple as calling <code class=\"language-text\">likes.next(val)</code> with either <code class=\"language-text\">LikeAction.Like</code> or <code class=\"language-text\">LikeAction.Unlike</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//increases likes</span>\nfirstTweet<span class=\"token punctuation\">.</span>likes<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span>LikeAction<span class=\"token punctuation\">.</span>Like<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">//decreases likes</span>\nfirstTweet<span class=\"token punctuation\">.</span>likes<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span>LikeAction<span class=\"token punctuation\">.</span>Unlike<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Now that we have set up the ground work let’s come to the interesting part. We like to be able to keep track of all likes/unlikes so that we can show the total number of likes of all tweets.</p>\n<p>Remember the imperative for loop that we wrote in the previous example to collect all positions manually? We could kind of do the same here to calculate the total number of likes <a href=\"http://jsbin.com/yoximomuji/1/edit?js,console\">manually</a>.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> likeCount <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\ntweets<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">tweet</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  tweet<span class=\"token punctuation\">.</span>likes<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">likeAction</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    likeCount <span class=\"token operator\">=</span> likeCount <span class=\"token operator\">+</span> likeAction<span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Total Likes: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>likeCount<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<blockquote>\n<p><strong>Special tip:</strong> Don’t get confused, the fact that we can accumulate our <code class=\"language-text\">LikeActions</code> is simply because we assigned <code class=\"language-text\">1</code> and <code class=\"language-text\">-1</code> to them.</p>\n</blockquote>\n<p>But just as we used <code class=\"language-text\">flatMap</code> to get one single collection of positions of all the invoices we can use <code class=\"language-text\">flatMap</code> <a href=\"http://jsbin.com/lupazehuve/1/edit?js,console\">here</a> to get one single <code class=\"language-text\">Observable</code> for all like actions of all the tweets.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> likeCount <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\ntweets<span class=\"token punctuation\">.</span><span class=\"token function\">flatMap</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">tweet</span> <span class=\"token operator\">=></span> tweet<span class=\"token punctuation\">.</span>likes<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">like</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        likeCount <span class=\"token operator\">=</span> likeCount <span class=\"token operator\">+</span> like<span class=\"token punctuation\">;</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Likes: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>likeCount<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<blockquote>\n<p><strong>Special tip:</strong> This is a perfect use case for the <code class=\"language-text\">scan</code> operator which can help us to get rid of the manual book-keeping in the <code class=\"language-text\">likeCount</code> variable. But let’s not get ahead of ourselves.</p>\n</blockquote>\n<p>So what does the above code do? For each tweet that gets pushed to us <code class=\"language-text\">flatMap</code> maps to the <code class=\"language-text\">Observable&lt;LikeAction&gt;</code> on the <code class=\"language-text\">likes</code> property. It subscribes to these Observables and flattens the notifications into a single <code class=\"language-text\">Observable&lt;LikeAction&gt;</code> that we can then subscribe to.</p>\n<p>The full working code of our example looks like this.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">enum</span> LikeAction <span class=\"token punctuation\">{</span>\n  Like <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n  Unlike <span class=\"token operator\">=</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Tweet</span> <span class=\"token punctuation\">{</span>\n  likes <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Rx<span class=\"token punctuation\">.</span>Subject</span><span class=\"token operator\">&lt;</span>LikeAction<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">constructor</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token keyword\">public</span> text<span class=\"token punctuation\">:</span> string</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">let</span> tweets <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Rx<span class=\"token punctuation\">.</span>Subject</span><span class=\"token operator\">&lt;</span>Tweet<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> likeCount <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\ntweets<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">tweet</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>tweet<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\ntweets<span class=\"token punctuation\">.</span><span class=\"token function\">flatMap</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">tweet</span> <span class=\"token operator\">=></span> tweet<span class=\"token punctuation\">.</span>likes<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">likeAction</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        likeCount <span class=\"token operator\">=</span> likeCount <span class=\"token operator\">+</span> likeAction<span class=\"token punctuation\">;</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Total Likes: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>likeCount<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> firstTweet <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Tweet</span><span class=\"token punctuation\">(</span><span class=\"token string\">'first tweet'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> secondTweet <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Tweet</span><span class=\"token punctuation\">(</span><span class=\"token string\">'second tweet'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\ntweets<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span>firstTweet<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ntweets<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span>secondTweet<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nfirstTweet<span class=\"token punctuation\">.</span>likes<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span>LikeAction<span class=\"token punctuation\">.</span>Like<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nsecondTweet<span class=\"token punctuation\">.</span>likes<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span>LikeAction<span class=\"token punctuation\">.</span>Like<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nsecondTweet<span class=\"token punctuation\">.</span>likes<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span>LikeAction<span class=\"token punctuation\">.</span>Like<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nsecondTweet<span class=\"token punctuation\">.</span>likes<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span>LikeAction<span class=\"token punctuation\">.</span>Unlike<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>When we run the code we see the following output.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">first tweet\nsecond tweet\nTotal Likes: 1\nTotal Likes: 2\nTotal Likes: 3\nTotal Likes: 2</code></pre></div>\n<h2>Conclusion</h2>\n<p>Observables are really powerful. They allow us to to compose asynchronous tasks in a functional reactive way. Because they share so many similarities with collections we can apply a lot of our knowledge from popular libraries such as lodash.</p>","frontmatter":{"author":"christoph_burgdorf","title":"Exploring Rx Operators: flatMap","imageUrl":{"childImageSharp":{"sizes":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAMBBf/EABUBAQEAAAAAAAAAAAAAAAAAAAEC/9oADAMBAAIQAxAAAAHlpWuJNL//xAAZEAACAwEAAAAAAAAAAAAAAAAAAQIREiL/2gAIAQEAAQUCUkNFDj1WRn//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAYEAACAwAAAAAAAAAAAAAAAAABEBEgIf/aAAgBAQAGPwLaQF//xAAbEAADAAIDAAAAAAAAAAAAAAAAAREhMVFxgf/aAAgBAQABPyFtVpCiqanJ1ojBYPUVIuj/2gAMAwEAAgADAAAAEN8P/8QAFhEBAQEAAAAAAAAAAAAAAAAAAQAR/9oACAEDAQE/EFC2/8QAFhEAAwAAAAAAAAAAAAAAAAAAEBFR/9oACAECAQE/EFB//8QAHBAAAgICAwAAAAAAAAAAAAAAAREAMSFBUWFx/9oACAEBAAE/ECIIkSy5cIyhuB8t2BhNAteQCDCQAmdzgKn/2Q==","aspectRatio":1.5,"src":"/static/9b0c3e6a3a5f3d27abb003d7100abbd6/30037/rx-flatmap.jpg","srcSet":"/static/9b0c3e6a3a5f3d27abb003d7100abbd6/10bdc/rx-flatmap.jpg 158w,\n/static/9b0c3e6a3a5f3d27abb003d7100abbd6/f4ab0/rx-flatmap.jpg 315w,\n/static/9b0c3e6a3a5f3d27abb003d7100abbd6/30037/rx-flatmap.jpg 630w,\n/static/9b0c3e6a3a5f3d27abb003d7100abbd6/9810d/rx-flatmap.jpg 945w,\n/static/9b0c3e6a3a5f3d27abb003d7100abbd6/ff2e4/rx-flatmap.jpg 1260w,\n/static/9b0c3e6a3a5f3d27abb003d7100abbd6/2a5e2/rx-flatmap.jpg 1500w","sizes":"(max-width: 630px) 100vw, 630px"}}},"date":"01 August 2016","summary":"Another post in a series of articles to discover the magic of different Rx operators. In this article we like to learn about the very powerful flatMap operator.","categories":["rx"]}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/rx/2016/08/01/exploring-rx-operators-flatmap.html","previous":{"fields":{"slug":"/angular/2016/07/27/custom-form-controls-in-angular-2.html"},"frontmatter":{"date":"2016/07/27","title":"Custom Form Controls in Angular","categories":["angular"]}},"next":{"fields":{"slug":"/announcements/2016/08/30/announcing-angular-2-master-class-in-nyc.html"},"frontmatter":{"date":"2016/08/30","title":"Announcing Angular 2 Master Class in NYC","categories":["announcements"]}}}}}