{"componentChunkName":"component---src-templates-blog-post-js","path":"/angular/2015/12/10/ng-message-format-the-unheard-feature-in-angular.html","webpackCompilationHash":"0c5d630095500f933ccd","result":{"data":{"site":{"siteMetadata":{"title":"Articles by thoughtram","authors":[{"id":"pascal_precht","name":"Pascal Precht","twitter":"PascalPrecht","img":"https://avatars2.githubusercontent.com/u/445106?s=460&v=4"},{"id":"christoph_burgdorf","name":"Christoph Burgdorf","twitter":"cburgdorf","img":"https://avatars0.githubusercontent.com/u/521109?s=460&v=4"},{"id":"dominic_elm","name":"Dominic Elm","twitter":"d3lm","img":"https://avatars0.githubusercontent.com/u/12571019?s=400&v=4"},{"id":"thomas_burleson","name":"Thomas Burleson","twitter":"thomasburleson","img":"https://avatars3.githubusercontent.com/u/210413?s=400&v=4"},{"id":"elvira_eulitz","name":"Elvira Eulitz","twitter":"ElviraEulitz","img":"https://avatars3.githubusercontent.com/u/29247040?s=400&v=4"},{"id":"maxim_koretskyi","name":"Maxim Koretskyi","twitter":"maxim_koretskyi","img":"https://avatars3.githubusercontent.com/u/6124091?s=400&v=4"}]}},"markdownRemark":{"id":"639e6c43-69dd-5f83-987e-aac13b7ee301","excerpt":"Angular 1.5 is pretty much around the corner and with a new release, new fixes, improvements and features are added to the framework. While this is awesome and…","html":"<p>Angular 1.5 is pretty much around the corner and with a new release, new fixes, improvements and features are added to the framework. While this is awesome and we’re all excited about it, it seems like we’re forgetting about all the nice things we already have.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 632px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/58ba3ccec1f6be120d9e129f954c49f7/f84ea/tweet.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.43670886075949%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAAB10lEQVQoz41T227bMAz1n+99T/uIAfuFrWiLtQ8ZsBYZ0iyO42tiJ7FTe07iuy3LpxSzBAU6bBNAkxIl8vCQ1kDrV1bgUJQYpIQk6fsewzAoF+u3wg40QmKXCYTHDkkh2Kc1ncDH6xE+3YxgmhbGkylmcwNt1+FvaxANHt0U77484/1tjA93MVpKoKmoD4aDsekiy3NEcYKc0CqUSuQFtbyc9bQfBomqEdjua0SHGknenRCqzybwEW7WiHbPcFwXlmVDJ5SrlQ/XW5I9hx+syeexzw8ChNEOge/Dtiw4jgPZC0bOAR3Pg24s6LGHMIxg2w6MxYIDbLchpj9nmFMCY2FyAm+5hGXbpFe/tc+8MkJVznqz4cwzXYdHDzYUxKS9SdlVgKZp0AnBmm3it+taLl/ZQohLAzngMcuQpHuSlKUoiUMJdD0u3f7XOt/TJBnx/khBKiK5RUJ2r3xNisN6SnT4iOOY/Blm0zFurj7D/PEd88d7RqeuylcjRQgHhGkOQfDLukWalaeMdYLj+ol4XCFJYup8hqfJGHe319BH95h8+0qlngK+nlFNPa7qmhFmRYGyKnkk5P9V+mboucvnIa6bAnm1Z7usav5zFPFC9Hx2nsmz/InfF+T0R6lfM2kOAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"tweet\"\n        title=\"tweet\"\n        src=\"/static/58ba3ccec1f6be120d9e129f954c49f7/f84ea/tweet.png\"\n        srcset=\"/static/58ba3ccec1f6be120d9e129f954c49f7/9ec3c/tweet.png 200w,\n/static/58ba3ccec1f6be120d9e129f954c49f7/c7805/tweet.png 400w,\n/static/58ba3ccec1f6be120d9e129f954c49f7/f84ea/tweet.png 632w\"\n        sizes=\"(max-width: 632px) 100vw, 632px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>A few days ago, we asked on twitter who’s interested to learn about an <strong>unheard feature</strong> in Angular. Based on the reactions to that tweet, it’s quite obvious that you all are and that’s awesome! So what is this unheard feature we’re talking about? If you read this article you can surely tell from its title that it’s probably about this thing called <strong>ngMessageFormat</strong>. We’ll get right into it but first we’d like to make one thing clear:</p>\n<p><strong>This feature is available since Angular 1.4</strong></p>\n<p>If you’re on version 1.4 or higher, this feature is already available to use. So, what you learn in the next couple of minutes you can use straight away!</p>\n<h2>Understanding Pluralization and Gender Selection</h2>\n<p>Earlier this year I gave a talk together with <a href=\"http://twitter.com/chirayuk\">Chirayu</a>, a former member of the Angular core team, about how the Angular project is going to solve internationalization and localization in the future. The talk can be watched <a href=\"https://www.youtube.com/watch?v=iBBkCA1M-mc\">right here</a> and if you’re more a reader kind of person, we wrote about everything in our article on <a href=\"/angular/2015/03/21/angular-and-i18n-the-new-world.html\">Angular and i18n - A new world</a>.</p>\n<p>One thing that is an essential part of i18n, but also a sort of isolated topic at the same time, is <strong>pluralization</strong> and <strong>gender selection</strong>. We probably all ran into this at a some point. For example, displaying a notification that says:</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\">You have {{numberOfMessages}} new messages.</code></pre></div>\n<p>While this works as long as <code class=\"language-text\">numberOfMessages</code> evaluates to something <code class=\"language-text\">&gt; 1</code>, it doesn’t fit anymore as soon as we have just a single message. Our template would look something like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\">You have 1 new messages.</code></pre></div>\n<p>This can easily be solved with the <code class=\"language-text\">ngSwitch</code> directive, or, in fact Angular comes with an <code class=\"language-text\">ngPluralize</code> directive that introduces a couple more features (like <code class=\"language-text\">offset</code>) to make pluralization easy. Here’s an <code class=\"language-text\">ngPluralize</code> solution for the scenario above:</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ng-pluralize</span> <span class=\"token attr-name\">count</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>numberOfMessages<span class=\"token punctuation\">\"</span></span>\n              <span class=\"token attr-name\">when</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>{'1': 'You have one new message.',\n                     'other': 'You have {} new messages.'}<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ng-pluralize</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>Pluralization can be hard, especially if we consider that it can vary heavily depending on the language we’re using. While we have “one” and “more” in most of the european language rules, other languages have “one”, “few” and “more”.</p>\n<p>Another thing that comes into play is <strong>gender selection</strong>. Depending on a persons gender, we might need to output different text.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\">Send him an invite.\nSend her an invite.\nSend them an invite.</code></pre></div>\n<p>This can not be solved with <code class=\"language-text\">ngPluralize</code> today. Also, what if we have text in HTML attributes that needs to be pluralized as well?</p>\n<h2>Introducing ngMessageFormat</h2>\n<p>Luckily, there’s a standard called <a href=\"http://userguide.icu-project.org/formatparse/messages\">ICU Messageformat</a> which tackles pluralization and gender selection properly. In fact, with Messageformat, we can even nest gender selection rules and pluralization rules and vice-versa. But what has this to do with Angular?</p>\n<p>Well, as part of the effort for the new i18n solution, Angular’s interplation syntax got extended <strong>in Angular 1.4</strong>. In other words, we can basically overload the expression syntax with ICU Messageformat expressions. All we have to do is to include the <code class=\"language-text\">ngMessageFormat</code> module.</p>\n<p><code class=\"language-text\">ngMessageFormat</code> can be installed via npm using the following command:</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">$ npm install angular-message-format</code></pre></div>\n<p>Once installed and included in our HTML document, we can add it as a module dependency and start using it right away! </p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">angular<span class=\"token punctuation\">.</span><span class=\"token function\">module</span><span class=\"token punctuation\">(</span><span class=\"token string\">'myApp'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'ngMessageFormat'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><strong>Pluralization with ngMessageFormat</strong></p>\n<p>With <code class=\"language-text\">ngMessageFormat</code> included, we can overload Angular expressions using a comma like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\">{{EXPRESSION, TYPE,\n     =VALUE { MESSAGE }\n     ...\n}}</code></pre></div>\n<p>Whereas <code class=\"language-text\">EXPRESSION</code> is the expression that needs to be evaluated, <code class=\"language-text\">TYPE</code> specifies what we want to do <code class=\"language-text\">plural</code> or <code class=\"language-text\">select</code> for pluralization and gender selection respectively. Let’s use this syntax to output our notification, based on <code class=\"language-text\">numberOfMessages</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\">{{numberOfMessages, plural,\n    =0 { You have no new messages }\n    =1 { You have one new message }\n    other { You have # new messages }\n}}</code></pre></div>\n<p>As we can see, <code class=\"language-text\">#</code> can be used as a placeholder that gets replaced with the actual evaluated value. Another nice thing to notice: We can use still use Angular expressions and filters <strong>inside</strong> those messages!</p>\n<p><strong>Gender selection with ngMessageFormat</strong></p>\n<p>Gender selection uses the exact same syntax. All we have to do is to change the selection type and define messages for each gender:</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\">{{genderExpression, select,\n    male { Send him a message. }\n    female { Send her a message. }\n    other { Send them a message. }\n}}</code></pre></div>\n<h2>Conclusion</h2>\n<p>Unfortunately <a href=\"https://docs.angularjs.org/api/ngMessageFormat\">ngMessageFormat</a> is not very well documented and it didn’t get a lot of love after it has been released. However, it is right there and it wants to be used. Just remember that it allows you to pluralize not only HTML attributes, it even makes nesting of plural and gender selection possible!</p>","frontmatter":{"author":"pascal_precht","title":"ngMessageFormat - Angular's unheard feature","imageUrl":null,"date":"10 December 2015","summary":"Angular 1.5 is pretty much around the corner. It turns out that there's a feature that already landed in Angular 1.4, that no one really noticed. Curious?","categories":["angular"]}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/angular/2015/12/10/ng-message-format-the-unheard-feature-in-angular.html","previous":{"fields":{"slug":"/angular2/2015/11/23/multi-providers-in-angular-2.html"},"frontmatter":{"date":"2015/11/23","title":"Multi Providers in Angular","categories":["angular2"]}},"next":{"fields":{"slug":"/announcements/2015/12/21/introducing-angular-2-master-class.html"},"frontmatter":{"date":"2015/12/21","title":"Angular 2 Master Class: Jump Start","categories":["announcements"]}}}}}