{"componentChunkName":"component---src-templates-blog-post-js","path":"/angular/2016/06/08/component-relative-paths-in-angular-2.html","webpackCompilationHash":"0c5d630095500f933ccd","result":{"data":{"site":{"siteMetadata":{"title":"Articles by thoughtram","authors":[{"id":"pascal_precht","name":"Pascal Precht","twitter":"PascalPrecht","img":"https://avatars2.githubusercontent.com/u/445106?s=460&v=4"},{"id":"christoph_burgdorf","name":"Christoph Burgdorf","twitter":"cburgdorf","img":"https://avatars0.githubusercontent.com/u/521109?s=460&v=4"},{"id":"dominic_elm","name":"Dominic Elm","twitter":"d3lm","img":"https://avatars0.githubusercontent.com/u/12571019?s=400&v=4"},{"id":"thomas_burleson","name":"Thomas Burleson","twitter":"thomasburleson","img":"https://avatars3.githubusercontent.com/u/210413?s=400&v=4"},{"id":"elvira_eulitz","name":"Elvira Eulitz","twitter":"ElviraEulitz","img":"https://avatars3.githubusercontent.com/u/29247040?s=400&v=4"},{"id":"maxim_koretskyi","name":"Maxim Koretskyi","twitter":"maxim_koretskyi","img":"https://avatars3.githubusercontent.com/u/6124091?s=400&v=4"}]}},"markdownRemark":{"id":"808b708c-c036-5eed-a74a-c1249844ab50","excerpt":"Component-based development is Angular’s most-loved feature. By now you should be familiar with using the  decorators to create components. You should be…","html":"<p>Component-based development is Angular’s <em>most-loved</em> feature. By now you should be familiar with using the <code class=\"language-text\">@Component</code> decorators to create components. You should be familiar with the required metadata information such as <code class=\"language-text\">selector</code> and <code class=\"language-text\">template</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Component<span class=\"token punctuation\">,</span> OnInit <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/core'</span><span class=\"token punctuation\">;</span>\n\n@<span class=\"token function\">Component</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  selector<span class=\"token punctuation\">:</span> <span class=\"token string\">'contacts-header'</span><span class=\"token punctuation\">,</span>\n  template<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n    &lt;nav class=\"navbar-fixed\">\n      &lt;span class=\"brand-logo center\">Contacts&lt;/span>\n    &lt;/nav>\n  </span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n  styles<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'.navbar-fixed { position:fixed; }'</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">HeaderComponent</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">OnInit</span> <span class=\"token punctuation\">{</span>  <span class=\"token punctuation\">}</span></code></pre></div>\n<blockquote>\n<p>If the above component syntax is new and strange, you should first review our article on <a href=\"/angular/2015/03/27/building-a-zippy-component-in-angular-2.html\">Building a Zipping Component in Angular</a>.</p>\n</blockquote>\n<p>If you are familiar with these concepts and you happen to be lucky, your components load without any problems.  Mostly likely, though, you have already encountered (or soon will) the dreaded, frustrating 404 component-loading errors:  </p>\n<p><img src=\"https://cloud.githubusercontent.com/assets/210413/15878482/eca5cba2-2ce0-11e6-8fb4-78868bec2644.png\" alt=\"component_url_404\"></p>\n<blockquote>\n<p>These errors mean your template HTML or styles (CSS) cannot be loaded!</p>\n</blockquote>\n<p>Let’s talk about why that happens and see how we can solve such problems in a way that is flexible and portable.  Before we jump into the actual problem we want to solve, let’s first review two (2) types of custom component implementations.</p>\n<h2>Components with Inline Metadata</h2>\n<p>For every Angular component that we implement, we define not only an HTML template, but may also define the CSS styles that go with that template, specifying any selectors, rules, and media queries that we need.</p>\n<p>One way to do this is to set the <code class=\"language-text\">styles</code> and <code class=\"language-text\">template</code> property in the component metadata. Consider a simple <em>Header</em> component:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Component<span class=\"token punctuation\">,</span> OnInit <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/core'</span><span class=\"token punctuation\">;</span>\n\n@<span class=\"token function\">Component</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  selector<span class=\"token punctuation\">:</span> <span class=\"token string\">'contacts-header'</span><span class=\"token punctuation\">,</span>\n  template<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n    &lt;nav class=\"navbar-fixed\">\n      &lt;div class=\"nav-wrapper\">\n        &lt;span class=\"brand-logo center\">Contacts&lt;/span>\n      &lt;/div>\n    &lt;/nav>\n  </span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n  styles<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'.navbar-fixed { position:fixed; }'</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">HeaderComponent</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">OnInit</span> <span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<blockquote>\n<p>We actually use this component in our <a href=\"http://thoughtram.io/angular-master-class.html\">Angular Master Class training</a>.</p>\n</blockquote>\n<p>Using this component is super easy. There are no external file dependencies as all the HTML and CSS is defined inline. Therefore we should <em>never</em> see [in the DevTools console] a 404 loading error for this component.</p>\n<h2>Components with External Assets</h2>\n<p>Another component feature allows us to load HTML and styles from external files: using URLs in the metadata configuration block. Refactoring a component’s code, HTML, and CSS into three separate files [in the same package] is a common <a href=\"https://angular.io/docs/ts/latest/guide/style-guide.html#!#components\">Angular Best-Practice</a>.</p>\n<ul>\n<li>header.component.ts</li>\n<li>header.component.html</li>\n<li>header.component.css</li>\n</ul>\n<p>This practice of using external files is especially important when your HTML or CSS is non-trivial. And using external files keeps your *.ts logic files much cleaner and easier to maintain.</p>\n<p><strong>header.component.ts</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Component<span class=\"token punctuation\">,</span> OnInit <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/core'</span><span class=\"token punctuation\">;</span>\n\n@<span class=\"token function\">Component</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  selector   <span class=\"token punctuation\">:</span> <span class=\"token string\">'contacts-header'</span><span class=\"token punctuation\">,</span>\n  templateUrl<span class=\"token punctuation\">:</span> <span class=\"token string\">'header.component.html'</span><span class=\"token punctuation\">,</span>\n  styleUrls  <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'header.component.css'</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">HeaderComponent</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">OnInit</span> <span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>header.component.css</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">.navbar-fixed</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">position</span><span class=\"token punctuation\">:</span>fixed<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>header.component.html</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>nav</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>navbar-fixed<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>nav-wrapper<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>brand-logo center<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Contacts<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>nav</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>Above we used URLs to specify external HTML and CSS resources. The important factor to note is that the URL required above [in <code class=\"language-text\">header.component.ts</code>] is not an absolute path. The path is actually relative to the <strong>application root</strong>: which is usually the location of the <code class=\"language-text\">index.html</code> web page that hosts the application.</p>\n<p>So the above component - without any url path information - must be stored in the application root in order to avoid 404 errors.  Wow, this does not scale well!</p>\n<ul>\n<li>What if we have many components all at the root level ?</li>\n<li>What if my components are organized in distinct packages ?</li>\n<li>What if we want to organize our components by feature or context ?</li>\n</ul>\n<blockquote>\n<p> ‘Organizing by feature’ is actually an <a href=\"https://angular.io/docs/ts/latest/guide/style-guide.html#!#application-structure\">Angular Style Guide - Best Practice</a></p>\n</blockquote>\n<p>To explore the issue, let’s consider the scenario where our details component (and files) are in the <code class=\"language-text\">src/app/header</code> package. The urls used above ( <code class=\"language-text\">header.component.html</code> and <code class=\"language-text\">header.component.css</code> ) would cause the loader to fail and the developer would see the following 404 error in the developers console:</p>\n<p><img src=\"https://cloud.githubusercontent.com/assets/210413/15878482/eca5cba2-2ce0-11e6-8fb4-78868bec2644.png\" alt=\"component_url_404\"></p>\n<p>If path to the component HTML or CSS file is not valid, the <strong>EASY</strong> workaround is to add absolute paths to the URLs. Let’s briefly explore that idea:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Component<span class=\"token punctuation\">,</span> OnInit <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/core'</span><span class=\"token punctuation\">;</span>\n\n@<span class=\"token function\">Component</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  selector   <span class=\"token punctuation\">:</span> <span class=\"token string\">'contacts-header'</span><span class=\"token punctuation\">,</span>\n  templateUrl<span class=\"token punctuation\">:</span> <span class=\"token string\">'src/app/header/header.component.html'</span><span class=\"token punctuation\">,</span>\n  styleUrls  <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'src/app/header/header.component.css'</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">HeaderComponent</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">OnInit</span> <span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>This approach immediately triggers important questions and concerns:</p>\n<ul>\n<li>What if we move our components to other packages?</li>\n<li>What if we want to reuse our components in other applications?</li>\n<li>Can we not use using relative-paths in our components ?</li>\n</ul>\n<p>Using absolute paths in our URLs for component HTML or CSS is a horrible idea and band-aid solution. Don’t do it!</p>\n<p><img src=\"https://cloud.githubusercontent.com/assets/210413/15881568/9c552dac-2cfc-11e6-808c-f84540d2d758.gif\" alt=\"no-gif\"></p>\n<h2>Components with Relative-Path URLs</h2>\n<p>In fact, we can use relative paths. But not the way you may first think… and not without understanding and accepting some constraints.</p>\n<p>At first we might be tempted to try this:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Component<span class=\"token punctuation\">,</span> OnInit <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/core'</span><span class=\"token punctuation\">;</span>\n\n@<span class=\"token function\">Component</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  selector   <span class=\"token punctuation\">:</span> <span class=\"token string\">'contacts-header'</span><span class=\"token punctuation\">,</span>\n  templateUrl<span class=\"token punctuation\">:</span> <span class=\"token string\">'./header.component.html'</span><span class=\"token punctuation\">,</span>\n  styleUrls  <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'./header.component.css'</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">HeaderComponent</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">OnInit</span> <span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>We might expect that <code class=\"language-text\">./header.component.html</code> is a path relative to the <code class=\"language-text\">header.component.ts</code> file and that component-relative paths should work, right?  </p>\n<p>Instead, we get another <strong>404 - Not found - Exception</strong>.</p>\n<p>Remember we noted that the paths are relative to the <strong>Application Root</strong> (at load time)? Since we are using the package <code class=\"language-text\">src/app/header/header.component.*</code>, then our files obviously are not at the app root. Even worse is a scenario where the deployed files have different structures than the originating source.</p>\n<p>We could use a gulp or grunt task to deploy to a <code class=\"language-text\">dist</code> directory and have all our components in the dist root directory. Don’t deploy all your component files to the app root… OMG, that is another horrible idea! Don’t do it.</p>\n<p><img src=\"https://cloud.githubusercontent.com/assets/210413/15881568/9c552dac-2cfc-11e6-808c-f84540d2d758.gif\" alt=\"no-gif\"></p>\n<h2>Why Component-Relative Paths are not supported</h2>\n<p>At first this limitation seems like a real feature screw-up within Angular. But the bright minds at Google know [from experience] that developers can [and will] load the files and modules using many different methods:</p>\n<ul>\n<li>Loading each file explicitly with <code class=\"language-text\">&lt;script&gt;</code> tags</li>\n<li>Loading from CommonJS packages</li>\n<li>Loading from SystemJS</li>\n<li>Loading using JSPM</li>\n<li>Loading using WebPack</li>\n<li>Loading using Browserify</li>\n</ul>\n<p>There are so many ways developers can deploy their apps: bundled or unbundled, different module formats, etc. It simply is not possible for Angular to absolutely know where the files reside at runtime.</p>\n<h2>Agreeing on Constraints</h2>\n<p>If we decide on <strong>CommonJS</strong> formats AND we use a standard module loader, then we can use the <code class=\"language-text\">module.id</code> variable which contains the absolute URL of the component class [when the module file is actually loaded]: the exact syntax is <code class=\"language-text\">moduleId : module.id</code>.</p>\n<blockquote>\n<p>This <strong><code class=\"language-text\">moduleId</code></strong> value is used by the Angular reflection processes and the <code class=\"language-text\">metadata_resolver</code> component to evaluate the fully-qualified component path before the component is constructed.</p>\n</blockquote>\n<p>Let’s see how this works with the component using <strong>CommonJS</strong>, <strong>SystemJS</strong>, <strong>JSPM</strong>, and <strong>WebPack</strong>:</p>\n<br/>\n<hr>\n<p><em>CommonJS</em></p>\n<p><strong>header.component.ts</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Component<span class=\"token punctuation\">,</span> OnInit <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/core'</span><span class=\"token punctuation\">;</span>\n\n@<span class=\"token function\">Component</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  moduleId<span class=\"token punctuation\">:</span> module<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span>    <span class=\"token comment\">// fully resolved filename; defined at module load time</span>\n  selector<span class=\"token punctuation\">:</span> <span class=\"token string\">'contacts-header'</span><span class=\"token punctuation\">,</span>\n  templateUrl<span class=\"token punctuation\">:</span> <span class=\"token string\">'header.component.html'</span><span class=\"token punctuation\">,</span>\n  styleUrls<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'header.component.css'</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">HeaderComponent</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">OnInit</span> <span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<blockquote>\n<p><em>Note:</em> the above requires that your <code class=\"language-text\">tsconfig.json</code> file specifies <strong>commonjs</strong>; since <code class=\"language-text\">module.id</code> is a variable available when using that module format:</p>\n</blockquote>\n<p><strong>tsconfig.json</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"compilerOptions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"module\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"commonjs\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"target\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"es5\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<hr>\n<p><em>SystemJS</em></p>\n<p>If we decide to use SystemJS, we use <strong><code class=\"language-text\">__moduleName</code></strong> variable instead of the <code class=\"language-text\">module.id variable</code>:</p>\n<p><strong>header.component.ts</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Component<span class=\"token punctuation\">,</span> OnInit <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/core'</span><span class=\"token punctuation\">;</span>\n\n@<span class=\"token function\">Component</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  moduleId<span class=\"token punctuation\">:</span> __moduleName<span class=\"token punctuation\">,</span>    <span class=\"token comment\">// fully resolved filename; defined at module load time</span>\n  selector<span class=\"token punctuation\">:</span> <span class=\"token string\">'contacts-header'</span><span class=\"token punctuation\">,</span>\n  templateUrl<span class=\"token punctuation\">:</span> <span class=\"token string\">'header.component.html'</span><span class=\"token punctuation\">,</span>\n  styleUrls<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'header.component.css'</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">HeaderComponent</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">OnInit</span> <span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<hr>\n<p><em>JSPM</em></p>\n<p>If we decide to use <strong>JSPM</strong>, we use the <code class=\"language-text\">typescriptOptions</code> configuration format in the <code class=\"language-text\">config.js</code> file:</p>\n<p><strong>config.js</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">SystemJS<span class=\"token punctuation\">.</span><span class=\"token function\">config</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  typescriptOptions<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    module<span class=\"token punctuation\">:</span> <span class=\"token string\">\"commonjs\"</span><span class=\"token punctuation\">,</span>\n    emitDecoratorMetadata<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    experimentalDecorators<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  transpiler<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n  baseURL<span class=\"token punctuation\">:</span> <span class=\"token string\">\"/dist\"</span><span class=\"token punctuation\">,</span>\n  map<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    app<span class=\"token punctuation\">:</span> <span class=\"token string\">'src'</span><span class=\"token punctuation\">,</span>\n    typescript<span class=\"token punctuation\">:</span> <span class=\"token string\">'node_modules/typescript/lib/typescript.js'</span><span class=\"token punctuation\">,</span>\n    angular2<span class=\"token punctuation\">:</span> <span class=\"token string\">'node_modules/angular2'</span><span class=\"token punctuation\">,</span>\n    rxjs<span class=\"token punctuation\">:</span> <span class=\"token string\">'node_modules/rxjs'</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  packages<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    app<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      defaultExtension<span class=\"token punctuation\">:</span> <span class=\"token string\">'ts'</span><span class=\"token punctuation\">,</span>\n      main<span class=\"token punctuation\">:</span> <span class=\"token string\">'app.ts'</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    angular2<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      defaultExtension<span class=\"token punctuation\">:</span> <span class=\"token string\">'js'</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    rxjs<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      defaultExtension<span class=\"token punctuation\">:</span> <span class=\"token string\">'js'</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<blockquote>\n<p><em>Note</em> this solution requires the <a href=\"https://github.com/frankwallis/plugin-typescript\">SystemJS Typescript Plugin</a> to transcompile the typescript</p>\n</blockquote>\n<hr>\n<p><em>WebPack</em></p>\n<p>If we decide to use <strong>WebPack</strong> to bundle our files, we can use <code class=\"language-text\">require</code> or <code class=\"language-text\">import</code> to force Webpack to load the file contents and assign directly to the metadata property. This means that WebPack is loading the content <strong>instead</strong> of Angular’s runtime loader. See <a href=\"https://angular.io/docs/ts/latest/guide/webpack.html\">WebPack : An Introduction</a> for more details.</p>\n<p>With WebPack there are three (3) options available to load the component’s external HTML and CSS.</p>\n<ol>\n<li>We can use <code class=\"language-text\">require( )</code> to reference component-relative paths.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Component <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/core'</span><span class=\"token punctuation\">;</span>\n\n@<span class=\"token function\">Component</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  selector<span class=\"token punctuation\">:</span> <span class=\"token string\">'my-app'</span><span class=\"token punctuation\">,</span>\n  template<span class=\"token punctuation\">:</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./header.component.html'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  styles<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./header.component.css'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">HeaderComponent</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">OnInit</span> <span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>It is important to note that here we are not using the <code class=\"language-text\">templateUrl</code> or <code class=\"language-text\">styleUrls</code> keys. Instead we are using <code class=\"language-text\">require(&#39;...&#39;)</code> to load the data and assign the file contents directly to the metadata object key <code class=\"language-text\">template</code> <strong>BEFORE</strong> the Angular  component initializes.</p>\n<ol start=\"2\">\n<li>As an alternative approach to <code class=\"language-text\">require(...)</code>, we can instead use <code class=\"language-text\">import headerTemplate from &#39;./header.component.html&#39;;</code>:</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Component <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/core'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Component <span class=\"token punctuation\">}</span>  <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/core'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> headerTemplate <span class=\"token keyword\">from</span> <span class=\"token string\">'./header.component.html'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> headerStyle    <span class=\"token keyword\">from</span> <span class=\"token string\">'./header.component.css'</span><span class=\"token punctuation\">;</span>\n\n@<span class=\"token function\">Component</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  selector <span class=\"token punctuation\">:</span> <span class=\"token string\">'my-app'</span><span class=\"token punctuation\">,</span>\n  template <span class=\"token punctuation\">:</span> headerTemplate<span class=\"token punctuation\">,</span>\n  styles   <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>headerStyle<span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">HeaderComponent</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">OnInit</span> <span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ol start=\"3\">\n<li>Finally, WebPack developers can load templates and styles at runtime by adding <code class=\"language-text\">./</code> at the beginning of the template,\nstyles, and styleUrls properties that reference *component-relative URLS.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Component <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/core'</span><span class=\"token punctuation\">;</span>\n\n@<span class=\"token function\">Component</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  selector <span class=\"token punctuation\">:</span> <span class=\"token string\">'my-app'</span><span class=\"token punctuation\">,</span>\n  templateUrl<span class=\"token punctuation\">:</span> <span class=\"token string\">'./header.component.html'</span><span class=\"token punctuation\">,</span>\n  styleUrls<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'./header.component.css'</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">HeaderComponent</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">OnInit</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">}</span></code></pre></div>\n<blockquote>\n<p>Behind the scenese, Webpack will actually still do a <code class=\"language-text\">require</code> to load the templates and styles.\nBut our markup remains clean and uncluttered.</p>\n</blockquote>\n<p>Personally, I like (3) approach used with the <code class=\"language-text\">moduleId</code> property (as a backup). Thanks to Soós Gábor for his WebPack expertise and insight here.</p>\n<h2>Conclusion</h2>\n<p>The key lesson is to set the <strong><code class=\"language-text\">moduleId :  module.id</code></strong> in the <code class=\"language-text\">@Component</code> decorator! Without the <strong>moduleId</strong> setting, Angular will look for our files in paths relative to the application root.</p>\n<blockquote>\n<p>And don’t forget the <code class=\"language-text\">&quot;module&quot;: &quot;commonjs&quot;</code> in your <strong>tsconfig.json</strong>.</p>\n</blockquote>\n<p>The beauty of this component-relative-path solution is that we can (1) easily repackage our components and (2) easily reuse components… all without changing the <code class=\"language-text\">@Component</code> metadata.</p>\n<blockquote>\n<p>The <a href=\"https://github.com/angular/angular-cli/blob/master/WEBPACK_UPDATE.md\">Angular Cli WebPack preview</a> now uses use webpack instead of Broccoli.\nAnd with WebPack, the Angular Cli defaults to using the component-relative path approach described here. #ftw</p>\n</blockquote>","frontmatter":{"author":"thomas_burleson","title":"Component-Relative Paths in Angular","imageUrl":{"childImageSharp":{"sizes":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMFBP/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAVpnvNpJD//EABoQAAIDAQEAAAAAAAAAAAAAAAECAAMREyH/2gAIAQEAAQUCRSI+JZ2qEHpsTBP/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAaEAEAAgMBAAAAAAAAAAAAAAABABACESFB/9oACAEBAAY/AsVgeTXWiv/EABsQAQACAgMAAAAAAAAAAAAAAAEAIRBRETFh/9oACAEBAAE/IRaKl8sS9NmK7egQd0BBrH//2gAMAwEAAgADAAAAEHAP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGxABAAMAAwEAAAAAAAAAAAAAAQARIWFxgZH/2gAIAQEAAT8QGsIoBZ7HL2ZIgLjZEgp8N+xwHfewPQip/9k=","aspectRatio":1.435506241331484,"src":"/static/fe7bd8e47a57040ccae2e0bb7c450e43/30037/component-relative-paths-in-angular-2.jpg","srcSet":"/static/fe7bd8e47a57040ccae2e0bb7c450e43/10bdc/component-relative-paths-in-angular-2.jpg 158w,\n/static/fe7bd8e47a57040ccae2e0bb7c450e43/f4ab0/component-relative-paths-in-angular-2.jpg 315w,\n/static/fe7bd8e47a57040ccae2e0bb7c450e43/30037/component-relative-paths-in-angular-2.jpg 630w,\n/static/fe7bd8e47a57040ccae2e0bb7c450e43/9810d/component-relative-paths-in-angular-2.jpg 945w,\n/static/fe7bd8e47a57040ccae2e0bb7c450e43/9b3c1/component-relative-paths-in-angular-2.jpg 1035w","sizes":"(max-width: 630px) 100vw, 630px"}}},"date":"08 June 2016","summary":"Component-relative enable developers to more easily create maintainable, reusable, portable components in Angular. Here's how!","categories":["angular"]}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/angular/2016/06/08/component-relative-paths-in-angular-2.html","previous":{"fields":{"slug":"/angular/2016/05/23/opaque-tokens-in-angular-2.html"},"frontmatter":{"date":"2016/05/23","title":"How to prevent name collisions in Angular providers","categories":["angular"]}},"next":{"fields":{"slug":"/angular/2016/06/14/routing-in-angular-2-revisited.html"},"frontmatter":{"date":"2016/06/14","title":"Routing in Angular revisited","categories":["angular"]}}}}}