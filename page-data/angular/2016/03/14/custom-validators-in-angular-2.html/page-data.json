{"componentChunkName":"component---src-templates-blog-post-js","path":"/angular/2016/03/14/custom-validators-in-angular-2.html","webpackCompilationHash":"0c5d630095500f933ccd","result":{"data":{"site":{"siteMetadata":{"title":"Articles by thoughtram","authors":[{"id":"pascal_precht","name":"Pascal Precht","twitter":"PascalPrecht","img":"https://avatars2.githubusercontent.com/u/445106?s=460&v=4"},{"id":"christoph_burgdorf","name":"Christoph Burgdorf","twitter":"cburgdorf","img":"https://avatars0.githubusercontent.com/u/521109?s=460&v=4"},{"id":"dominic_elm","name":"Dominic Elm","twitter":"d3lm","img":"https://avatars0.githubusercontent.com/u/12571019?s=400&v=4"},{"id":"thomas_burleson","name":"Thomas Burleson","twitter":"thomasburleson","img":"https://avatars3.githubusercontent.com/u/210413?s=400&v=4"},{"id":"elvira_eulitz","name":"Elvira Eulitz","twitter":"ElviraEulitz","img":"https://avatars3.githubusercontent.com/u/29247040?s=400&v=4"},{"id":"maxim_koretskyi","name":"Maxim Koretskyi","twitter":"maxim_koretskyi","img":"https://avatars3.githubusercontent.com/u/6124091?s=400&v=4"}]}},"markdownRemark":{"id":"d5f9466d-aad5-530b-aab0-7d32cc75dc76","excerpt":"Forms are part of almost every web application out there. Angular strives for making working with forms a breeze. While there are a couple of built-in…","html":"<p>Forms are part of almost every web application out there. Angular strives for making working with forms a breeze. While there are a couple of built-in validators provided by the framework, we often need to add some custom validation capabilities to our application’s form, in order to fulfill our needs.</p>\n<p>We can easily extend the browser vocabulary with additional custom validators and in this article we are going to explore how to do that.</p>\n<h2>Built-in Validators</h2>\n<p>Angular comes with a subset of built-in validators out of the box. We can apply them either declaratively as directives on elements in our DOM, in case we’re building a <strong>template-driven</strong> form, or imperatively using the <code class=\"language-text\">FormControl</code> and <code class=\"language-text\">FormGroup</code> or <code class=\"language-text\">FormBuilder</code> APIs, in case we’re building a <strong>reactive</strong> forms. If you don’t know what it’s all about with template-driven and reactive forms, don’t worry, we have an articles about both topics <a href=\"/angular/2016/03/21/template-driven-forms-in-angular-2.html\">here</a> and <a href=\"/angular/2016/06/22/model-driven-forms-in-angular-2.html\">here</a>.</p>\n<p>The supported built-in validators, at the time of writing this article, are:</p>\n<ul>\n<li><strong>required</strong> - Requires a form control to have a non-empty value</li>\n<li><strong>minlength</strong> - Requires a form control to have a value of a minimum length</li>\n<li><strong>maxlength</strong> - Requires a form control to have a value of a maximum length</li>\n<li><strong>pattern</strong> - Requires a form control’s value to match a given regex</li>\n</ul>\n<p>As mentioned earlier, validators can be applied by simply using their corresponding directives. To make these directives available, we need to import Angular’s <code class=\"language-text\">FormsModule</code> to our application module first:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> NgModule <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/core'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> BrowserModule <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/platform-browser'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> FormsModule <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/forms'</span><span class=\"token punctuation\">;</span>\n\n@<span class=\"token function\">NgModule</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  imports<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>BrowserModule<span class=\"token punctuation\">,</span> FormsModule<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// we add FormsModule here</span>\n  declarations<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>AppComponent<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  bootstrap<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>AppComponent<span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AppModule</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span></code></pre></div>\n<p>Once this is done, we can use all directives provided by this module in our application. The following form shows how the built-in validators are applied to dedicated form controls:</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span> <span class=\"token attr-name\">novalidate</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>name<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">ngModel</span> <span class=\"token attr-name\">required</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>street<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">ngModel</span> <span class=\"token attr-name\">minlength</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>3<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>city<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">ngModel</span> <span class=\"token attr-name\">maxlength</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>10<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>zip<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">ngModel</span> <span class=\"token attr-name\">pattern</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>[A-Za-z]{5}<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>Or, if we had a reactive form, we’d need to import the <code class=\"language-text\">ReactiveFormsModule</code> first:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> ReactiveFormsModule <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/forms'</span><span class=\"token punctuation\">;</span>\n\n@<span class=\"token function\">NgModule</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  imports<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>BrowserModule<span class=\"token punctuation\">,</span> ReactiveFormsModule<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AppModule</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span></code></pre></div>\n<p>And can then build our form either using <code class=\"language-text\">FormControl</code> and <code class=\"language-text\">FormGroup</code> APIs:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">@<span class=\"token function\">Component</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Cmp</span> <span class=\"token punctuation\">{</span>\n\n  form<span class=\"token punctuation\">:</span> FormGroup<span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">ngOnInit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>form <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FormGroup</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      name<span class=\"token punctuation\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FormControl</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">,</span> Validators<span class=\"token punctuation\">.</span>required<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      street<span class=\"token punctuation\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FormControl</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">,</span> Validators<span class=\"token punctuation\">.</span><span class=\"token function\">minLength</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      city<span class=\"token punctuation\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FormControl</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">,</span> Validators<span class=\"token punctuation\">.</span><span class=\"token function\">maxLength</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      zip<span class=\"token punctuation\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FormControl</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">,</span> Validators<span class=\"token punctuation\">.</span><span class=\"token function\">pattern</span><span class=\"token punctuation\">(</span><span class=\"token string\">'[A-Za-z]{5}'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Or use the less verbose <code class=\"language-text\">FormBuilder</code> API that does the same work for us:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">@<span class=\"token function\">Component</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Cmp</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token keyword\">private</span> fb<span class=\"token punctuation\">:</span> FormBuilder</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">ngOnInit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>form <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>fb<span class=\"token punctuation\">.</span><span class=\"token function\">group</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      name<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">''</span><span class=\"token punctuation\">,</span> Validators<span class=\"token punctuation\">.</span>required<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      street<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">''</span><span class=\"token punctuation\">,</span> Validators<span class=\"token punctuation\">.</span><span class=\"token function\">minLength</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      city<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">''</span><span class=\"token punctuation\">,</span> Validators<span class=\"token punctuation\">.</span><span class=\"token function\">maxLength</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      zip<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">''</span><span class=\"token punctuation\">,</span> Validators<span class=\"token punctuation\">.</span><span class=\"token function\">pattern</span><span class=\"token punctuation\">(</span><span class=\"token string\">'[A-Za-z]{5}'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>We would still need to associate a form model with a form in the DOM using the <code class=\"language-text\">[formGroup]</code> directive likes this:</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span> <span class=\"token attr-name\">novalidate</span> <span class=\"token attr-name\">[formGroup]</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>form<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  ...\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>Observing these two to three different methods of creating a form, we might wonder how it is done that we can use the validator methods imperatively in our component code, and apply them as directives to input controls declaratively in our HTML code.</p>\n<p>It turns out there’s really not such a big magic involved, so let’s build our own custom email validator.</p>\n<h2>Building a custom validator</h2>\n<p>In it’s simplest form, a validator is really just a function that takes a <code class=\"language-text\">Control</code> and returns either <code class=\"language-text\">null</code> when it’s valid, or and error object if it’s not. A TypeScript interface for such a validator looks something like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">interface</span> <span class=\"token class-name\">Validator</span><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">FormControl</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n   <span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">:</span><span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span>error<span class=\"token punctuation\">:</span> string<span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span>any<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Let’s implement a validator function <code class=\"language-text\">validateEmail</code> which implements that interface. All we need to do is to define a function that takes a <code class=\"language-text\">FormControl</code>, checks if it’s value matches the regex of an email address, and if not, returns an error object,  or <code class=\"language-text\">null</code> in case the value is valid.</p>\n<p>Here’s what such an implementation could look like:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> FormControl <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/forms'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">validateEmail</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">c<span class=\"token punctuation\">:</span> FormControl</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> <span class=\"token constant\">EMAIL_REGEXP</span> <span class=\"token operator\">=</span> <span class=\"token operator\">...</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token constant\">EMAIL_REGEXP</span><span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> <span class=\"token keyword\">null</span> <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    validateEmail<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      valid<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Pretty straight forward right? We import <code class=\"language-text\">FormControl</code> from <code class=\"language-text\">@angular/forms</code> to have the type information the function’s signature and simply test a regular expression with the <code class=\"language-text\">FormControl</code>’s value. That’s it. That’s a validator.</p>\n<p>But how do we apply them to other form controls? Well, we’ve seen how <code class=\"language-text\">Validators.required</code> and the other validators are added to the <code class=\"language-text\">new FormControl()</code> calls. <code class=\"language-text\">FormControl()</code> takes an initial value, a synchronous validator and an asynchronous validator. Which means, we do exactly the same with our custom validators.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">ngOnInit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>form <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FormGroup</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token operator\">...</span>\n    email<span class=\"token punctuation\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FormControl</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">,</span> validateEmail<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Don’t forget to import <code class=\"language-text\">validateEmail</code> accordinlgy, if necessary. Okay cool, now we know how to add our custom validator to a form control.</p>\n<p>However, what if we want to combine multiple validators on a single control? Let’s say our email field is <code class=\"language-text\">required</code> <strong>and</strong> needs to match the shape of an email address. <code class=\"language-text\">FormControl</code>s takes a single synchronous and a single asynchronous validator, or, a collection of synchronous and asynchronous validators.\nHere’s what it looks like if we’d combine the <code class=\"language-text\">required</code> validator with our custom one:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">ngOnInit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>form <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FormGroup</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token operator\">...</span>\n    email<span class=\"token punctuation\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FormControl</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>\n      Validators<span class=\"token punctuation\">.</span>required<span class=\"token punctuation\">,</span>\n      validateEmail\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2>Building custom validator directives</h2>\n<p>Now that we’re able to add our custom validator to our form controls imperatively when building model-driven forms, we might also enable our validator to be used in template driven forms. In other words: We need a directive. The validator should be usable like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span> <span class=\"token attr-name\">novalidate</span><span class=\"token punctuation\">></span></span>\n  ...\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>email<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>email<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">ngModel</span> <span class=\"token attr-name\">validateEmail</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p><code class=\"language-text\">validateEmail</code> is applied as an attribute to the <code class=\"language-text\">&lt;input&gt;</code> DOM element, which already gives us an idea what we need to do. We need to build a directive with a matching selector so it will be executed on all input controls where the directive is applied. Let’s start off with that.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Directive <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/core'</span><span class=\"token punctuation\">;</span>\n\n@<span class=\"token function\">Directive</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  selector<span class=\"token punctuation\">:</span> <span class=\"token string\">'[validateEmail][ngModel]'</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">EmailValidator</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span></code></pre></div>\n<p>We import the <code class=\"language-text\">@Directive</code> decorator form <code class=\"language-text\">@angular/core</code> and use it on a new <code class=\"language-text\">EmailValidator</code> class. If you’re familiar with the <code class=\"language-text\">@Component</code> decorator that this is probably not new to you. In fact, <code class=\"language-text\">@Directive</code> is a superset of <code class=\"language-text\">@Component</code> which is why most of the configuration properties are available.</p>\n<p>Okay, technically we could already make this directive execute in our app, all we need to do is to add it to our module’s <code class=\"language-text\">declarations</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> EmailValidator <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./email.validator'</span><span class=\"token punctuation\">;</span>\n\n@<span class=\"token function\">NgModule</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n  declarations<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>AppComponent<span class=\"token punctuation\">,</span> EmailValidator<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AppModule</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span></code></pre></div>\n<p>Even though this works, there’s nothing our directive does at the moment. What we want to do is to make sure that our custom validator is executed when Angular compiles this directive. How do we get there?</p>\n<p>Angular has an internal mechanism to execute validators on a form control. It maintains a <strong>multi provider</strong> for a dependency token called <code class=\"language-text\">NG_VALIDATORS</code>. If you’ve read our article on <a href=\"/angular2/2015/11/23/multi-providers-in-angular-2.html\">multi providers in Angular</a>, you know that Angular injects multiple values for a single token that is used for a multi provider. If you haven’t, we highly recommend checking it out as the rest of this article is based on it.</p>\n<p>It turns out that <strong>all</strong> built-in validators are already added to the <code class=\"language-text\">NG_VALIDATORS</code> token. So whenever Angular instantiates a form control and performs validation, it basically injects the dependency for the <code class=\"language-text\">NG_VALIDATORS</code> token, which is a list of all validators, and executes them one by one on that form control.</p>\n<p>Since multi providers can be extended by adding more multi providers to a token, we can consider <code class=\"language-text\">NG_VALIDATORS</code> as a hook to add our own validators.</p>\n<p>Let’s add our validator to the <code class=\"language-text\">NG_VALIDATORS</code> via our new directive:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Directive <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/core'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> <span class=\"token constant\">NG_VALIDATORS</span> <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/forms'</span><span class=\"token punctuation\">;</span>\n\n@<span class=\"token function\">Directive</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  selector<span class=\"token punctuation\">:</span> <span class=\"token string\">'[validateEmail][ngModel]'</span><span class=\"token punctuation\">,</span>\n  providers<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span> provide<span class=\"token punctuation\">:</span> <span class=\"token constant\">NG_VALIDATORS</span><span class=\"token punctuation\">,</span> useValue<span class=\"token punctuation\">:</span> validateEmail<span class=\"token punctuation\">,</span> multi<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">EmailValidator</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span></code></pre></div>\n<p>Again, if you’ve read our article on multi providers, this should look very familiar to you. We basically add a new value to the <code class=\"language-text\">NG_VALIDATORS</code> token by taking advantage of multi providers. Angular will pick our validator up by injecting what it gets for <code class=\"language-text\">NG_VALIDATORS</code>, and performs validation on a form control. Awesome, we can now use our validator for reactive<strong>and</strong> for template-driven forms!</p>\n<h2>Custom Validators with dependencies</h2>\n<p>Sometimes, a custom validator has dependencies so we need a way to inject them. Let’s say our email validator needs an <code class=\"language-text\">EmailBlackList</code> service, to check if the given control value is not only a valid email address but also not on our email black list (in an ideal world, we’d build a separate validator for checking against an email black list, but we use that as a motivation for now to have a dependency).</p>\n<p><strong>The not-so-nice way</strong></p>\n<p>One way to handle this is to create a factory function that returns our <code class=\"language-text\">validateEmail</code> function, which then uses an instance of <code class=\"language-text\">EmailBlackList</code> service. Here’s what such a factory function could look like:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> FormControl <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/forms'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">validateEmailFactory</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">emailBlackList<span class=\"token punctuation\">:</span> EmailBlackList</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">c<span class=\"token punctuation\">:</span> FormControl</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> <span class=\"token constant\">EMAIL_REGEXP</span> <span class=\"token operator\">=</span> <span class=\"token operator\">...</span>\n\n    <span class=\"token keyword\">let</span> isValid <span class=\"token operator\">=</span> <span class=\"token comment\">/* check validation with emailBlackList */</span>\n\n    <span class=\"token keyword\">return</span> isValid <span class=\"token operator\">?</span> <span class=\"token keyword\">null</span> <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      validateEmail<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        valid<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>This would allow us to register our custom validator via dependency injection like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">@<span class=\"token function\">Directive</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n  providers<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      provide<span class=\"token punctuation\">:</span> <span class=\"token constant\">NG_VALIDATORS</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function-variable function\">useFactory</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">emailBlackList</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token function\">validateEmailFactory</span><span class=\"token punctuation\">(</span>emailBlackList<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      deps<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>EmailBlackList<span class=\"token punctuation\">]</span>\n      multi<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">EmailValidator</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span></code></pre></div>\n<p>We can’t use <code class=\"language-text\">useValue</code> as provider recipe anymore, because we don’t want to return the factory function, but rather what the factory function <strong>returns</strong>. And since our factory function has a dependency itself, we need to have access to dependency tokens, which is why we use <code class=\"language-text\">useFactory</code> and <code class=\"language-text\">deps</code>. If this is entirely new to you, you might want to read our article on <a href=\"/angular/2015/05/18/dependency-injection-in-angular-2.html\">Dependency Injection in Angular</a> before we move on.</p>\n<p>Even though this would work, it’s quite a lot of work and also very verbose. We can do better here.</p>\n<p><strong>The better way</strong></p>\n<p>Wouldn’t it be nice if we could use constructor injection as we’re used to it in Angular? Yes, and guess what, Angular has us covered. It turns out that a validator can also be a <strong>class</strong> as long as it implements a <code class=\"language-text\">validate(c: FormControl)</code> method. Why is that nice? Well, we can inject our dependency using constructor injection and don’t have to setup a provider factory as we did before.</p>\n<p>Here’s what our <code class=\"language-text\">EmailValidator</code> class would look like when we apply this pattern to it:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">@<span class=\"token function\">Directive</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">EmailValidator</span> <span class=\"token punctuation\">{</span>\n  \n  validator<span class=\"token punctuation\">:</span> Function<span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">emailBlackList<span class=\"token punctuation\">:</span> EmailBlackList</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>validator <span class=\"token operator\">=</span> <span class=\"token function\">validateEmailFactory</span><span class=\"token punctuation\">(</span>emailBlackList<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">validate</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">c<span class=\"token punctuation\">:</span> FormControl</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">validator</span><span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>However, we now need to adjust the provider for <code class=\"language-text\">NG_VALIDATORS</code>, because we want to use an instance of <code class=\"language-text\">EmailValidator</code> to be used for validation, not the factory function. This seems easy to fix, because we know that we create instances of classes for dependency injection using the <code class=\"language-text\">useClass</code> recipe.</p>\n<p>However, we already added <code class=\"language-text\">EmailValidator</code> to the <code class=\"language-text\">directives</code> property of our component, which is a provider with the <code class=\"language-text\">useClass</code> recipe. We want to make sure that we get the exact same instance of <code class=\"language-text\">EmailValidator</code> on our form control, even though, we define a new provider for it. Luckily we have the <code class=\"language-text\">useExisting</code> recipe for that. <code class=\"language-text\">useExisting</code> defines an alias token for but returns the same instance as the original token:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">@<span class=\"token function\">Directive</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n  providers<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span> provide<span class=\"token punctuation\">:</span> <span class=\"token constant\">NG_VALIDATORS</span><span class=\"token punctuation\">,</span> useExisting<span class=\"token punctuation\">:</span> EmailValidator<span class=\"token punctuation\">,</span> multi<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">EmailValidator</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>Yikes! This won’t work</strong> . We’re referencing a token (<code class=\"language-text\">EmailValidator</code>) which is undefined at the point we’re using it because the class definition itself happens later in the code. That’s where <code class=\"language-text\">forwardRef()</code> comes into play.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> forwardRef <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/core'</span><span class=\"token punctuation\">;</span>\n\n@<span class=\"token function\">Directive</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n  providers<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span> provide<span class=\"token punctuation\">:</span> <span class=\"token constant\">NG_VALIDATORS</span><span class=\"token punctuation\">,</span> useExisting<span class=\"token punctuation\">:</span> <span class=\"token function\">forwardRef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> EmailValidator<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> multi<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">EmailValidator</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>If you don’t know what <code class=\"language-text\">forwardRef()</code> does, you might want to read our article on <a href=\"/angular/2015/09/03/forward-references-in-angular-2.html\">Forward References in Angular</a>.</p>\n<p>Here’s the full code for our custom email validator:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Directive<span class=\"token punctuation\">,</span> forwardRef <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/core'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> <span class=\"token constant\">NG_VALIDATORS</span><span class=\"token punctuation\">,</span> FormControl <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/forms'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">validateEmailFactory</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">emailBlackList<span class=\"token punctuation\">:</span> EmailBlackList</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">c<span class=\"token punctuation\">:</span> FormControl</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> <span class=\"token constant\">EMAIL_REGEXP</span> <span class=\"token operator\">=</span> <span class=\"token regex\">/^[a-z0-9!#$%&amp;'*+\\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token constant\">EMAIL_REGEXP</span><span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> <span class=\"token keyword\">null</span> <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      validateEmail<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        valid<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n@<span class=\"token function\">Directive</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  selector<span class=\"token punctuation\">:</span> <span class=\"token string\">'[validateEmail][ngModel],[validateEmail][formControl]'</span><span class=\"token punctuation\">,</span>\n  providers<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span> provide<span class=\"token punctuation\">:</span> <span class=\"token constant\">NG_VALIDATORS</span><span class=\"token punctuation\">,</span> useExisting<span class=\"token punctuation\">:</span> <span class=\"token function\">forwardRef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> EmailValidator<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> multi<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">EmailValidator</span> <span class=\"token punctuation\">{</span>\n\n  validator<span class=\"token punctuation\">:</span> Function<span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">emailBlackList<span class=\"token punctuation\">:</span> EmailBlackList</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>validator <span class=\"token operator\">=</span> <span class=\"token function\">validateEmailFactory</span><span class=\"token punctuation\">(</span>emailBlackList<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">validate</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">c<span class=\"token punctuation\">:</span> FormControl</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">validator</span><span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>You might notice that we’ve extended the selector, so that our validator not only works with <code class=\"language-text\">ngModel</code> but also with <code class=\"language-text\">formControl</code> directives. If you’re interested in more articles on forms in Angular, we’ve written a couple about <a href=\"/angular/2016/03/21/template-driven-forms-in-angular-2.html\">template-driven forms</a> and <a href=\"http://blog.thoughtram.io/angular/2016/06/22/model-driven-forms-in-angular-2.html\">reactive forms</a>.</p>","frontmatter":{"author":"pascal_precht","title":"Custom Validators in Angular","imageUrl":{"childImageSharp":{"sizes":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMFAv/EABUBAQEAAAAAAAAAAAAAAAAAAAEC/9oADAMBAAIQAxAAAAFu5amaJLE//8QAGxABAAICAwAAAAAAAAAAAAAAAQACAxAREhP/2gAIAQEAAQUCWq968euKMHX/xAAVEQEBAAAAAAAAAAAAAAAAAAAAEf/aAAgBAwEBPwFX/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGRAAAQUAAAAAAAAAAAAAAAAAAAECEiAy/9oACAEBAAY/Akk41X//xAAdEAEAAgEFAQAAAAAAAAAAAAABABEhEDFBUWFx/9oACAEBAAE/IXqzoY1nAlG5b7OXyICXjT//2gAMAwEAAgADAAAAEA8f/8QAFREBAQAAAAAAAAAAAAAAAAAAERD/2gAIAQMBAT8QSP/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABsQAQEBAQADAQAAAAAAAAAAAAERACExYXGB/9oACAEBAAE/EIVLXwDADM3hb+ZSne6iudh7Al+YIr0uVr13/9k=","aspectRatio":1.8709677419354838,"src":"/static/1ee4ce582f3fd447b35dd3b5ec3c8638/30037/custom-validators-bg.jpg","srcSet":"/static/1ee4ce582f3fd447b35dd3b5ec3c8638/10bdc/custom-validators-bg.jpg 158w,\n/static/1ee4ce582f3fd447b35dd3b5ec3c8638/f4ab0/custom-validators-bg.jpg 315w,\n/static/1ee4ce582f3fd447b35dd3b5ec3c8638/30037/custom-validators-bg.jpg 630w,\n/static/1ee4ce582f3fd447b35dd3b5ec3c8638/9810d/custom-validators-bg.jpg 945w,\n/static/1ee4ce582f3fd447b35dd3b5ec3c8638/ff2e4/custom-validators-bg.jpg 1260w,\n/static/1ee4ce582f3fd447b35dd3b5ec3c8638/d7684/custom-validators-bg.jpg 1450w","sizes":"(max-width: 630px) 100vw, 630px"}}},"date":"14 March 2016","summary":"Often, we need to add custom validation capabilities to our application's form. In this article we're going to explore how to implement custom validators.","categories":["angular"]}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/angular/2016/03/14/custom-validators-in-angular-2.html","previous":{"fields":{"slug":"/angular/2016/02/22/angular-2-change-detection-explained.html"},"frontmatter":{"date":"2016/02/22","title":"Angular Change Detection Explained","categories":["angular"]}},"next":{"fields":{"slug":"/angular/2016/03/21/template-driven-forms-in-angular-2.html"},"frontmatter":{"date":"2016/03/21","title":"Template-driven Forms in Angular","categories":["angular"]}}}}}