{"componentChunkName":"component---src-templates-blog-post-js","path":"/angular/2016/01/22/understanding-zones.html","webpackCompilationHash":"0c5d630095500f933ccd","result":{"data":{"site":{"siteMetadata":{"title":"Articles by thoughtram","authors":[{"id":"pascal_precht","name":"Pascal Precht","twitter":"PascalPrecht","img":"https://avatars2.githubusercontent.com/u/445106?s=460&v=4"},{"id":"christoph_burgdorf","name":"Christoph Burgdorf","twitter":"cburgdorf","img":"https://avatars0.githubusercontent.com/u/521109?s=460&v=4"},{"id":"dominic_elm","name":"Dominic Elm","twitter":"d3lm","img":"https://avatars0.githubusercontent.com/u/12571019?s=400&v=4"},{"id":"thomas_burleson","name":"Thomas Burleson","twitter":"thomasburleson","img":"https://avatars3.githubusercontent.com/u/210413?s=400&v=4"},{"id":"elvira_eulitz","name":"Elvira Eulitz","twitter":"ElviraEulitz","img":"https://avatars3.githubusercontent.com/u/29247040?s=400&v=4"},{"id":"maxim_koretskyi","name":"Maxim Koretskyi","twitter":"maxim_koretskyi","img":"https://avatars3.githubusercontent.com/u/6124091?s=400&v=4"}]}},"markdownRemark":{"id":"a1373c94-0223-555f-98da-3977c78e95f6","excerpt":"At NG-Conf 2014, Brian gave an excellent talk on zones and how they can change the way we deal with asynchronous code. If you haven’t watched this talk yet…","html":"<p>At NG-Conf 2014, <a href=\"http://twitter.com/briantford\">Brian</a> gave an excellent <a href=\"https://www.youtube.com/watch?v=3IqtmUscE_U\">talk on zones</a> and how they can change the way we deal with asynchronous code. If you haven’t watched this talk yet, give it a shot, it’s just ~15 minutes long. APIs might be different nowadays, but the semantics and underlying concepts are the same. In this article we’d like to dive a bit deeper into how zones work.</p>\n<h2>The problem to be solved</h2>\n<p>Let’s recap really quick what zones are. As Brian stated in his talk, they are basically <strong>an execution context</strong> for asynchronous operations. They turn out to be really useful for things like error handling and profiling. But what exactly does that mean?</p>\n<p>In order to understand the execution context part of it, we need to get a better picture of what the problem is that zones are trying to solve. Let’s first take a look at the following JavaScript code.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">bar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">baz</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">bar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">baz</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token punctuation\">}</span></code></pre></div>\n<p>Nothing special going on here. We have three functions <code class=\"language-text\">foo</code>, <code class=\"language-text\">bar</code> and <code class=\"language-text\">baz</code> that are executed in sequence. Let’s say we want to measure the execution time of this code. We could easily extend the snippet with some profiling bits like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> start<span class=\"token punctuation\">,</span>\n    time <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    timer <span class=\"token operator\">=</span> performance <span class=\"token operator\">?</span> performance<span class=\"token punctuation\">.</span>now <span class=\"token punctuation\">:</span> Date<span class=\"token punctuation\">.</span>now<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// start timer</span>\nstart <span class=\"token operator\">=</span> <span class=\"token function\">timer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">bar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">baz</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// stop timer</span>\ntime <span class=\"token operator\">=</span> <span class=\"token function\">timer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> start<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// log time in ms</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">floor</span><span class=\"token punctuation\">(</span>time<span class=\"token operator\">*</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">100</span> <span class=\"token operator\">+</span> <span class=\"token string\">'ms'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>However, often we have asynchronous work todo. This can be an AJAX request to fetch some data from a remote server, or a maybe we just want to schedule some work for the next frame. Whatever this asynchronous work is, it happens, as the name claims, asynchronously. Which basically means, those operations won’t be considered by our profiler. Take a look at this snippet:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">doSomething</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Async task'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// start timer</span>\nstart <span class=\"token operator\">=</span> <span class=\"token function\">timer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>doSomething<span class=\"token punctuation\">,</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">bar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">baz</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// stop timer</span>\ntime <span class=\"token operator\">=</span> <span class=\"token function\">timer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> start<span class=\"token punctuation\">;</span></code></pre></div>\n<p>We extended the code sequence with another operation, but this time it’s asynchronous. What effect does that have on our profiling? Well, we’ll see that there’s not such a big difference.</p>\n<p>There is in fact one more operation, so it takes slightly longer to execute this code, however, the actual execution time of when the <code class=\"language-text\">setTimeout()</code> call returns is not part of the overall profiling. This is because asynchronous operations are added to the browser’s <strong>event queue</strong>, which eventually gets cleaned up by the <strong>event loop</strong> once there’s time for that.</p>\n<p>If this is entirely new to you, you might want to watch this <a href=\"https://www.youtube.com/watch?v=8aGhZQkoFbQ\">great talk</a> on how the browser event loops works.</p>\n<p>So how do we solve this issue? What we need are basically hooks that allow us to execute some profiling code whenever such an asynchronous task happens. Sure, we could probably create and start an individual timer for each asynchronous operation manually, but that would get quite messy as asynchronous operations are added to the code sequence.</p>\n<p><strong>This is exactly where zones come into play</strong>. Zones can perform an operation - such as starting or stopping a timer, or saving a stack trace - each time that code enters or exits a zone. They can override methods within our code, or even associate data with individual zones.</p>\n<h2>Creating, forking and extending Zones</h2>\n<p>Zones are actually a language feature in Dart. However, since Dart also just compiles to JavaScript, we can implement the same functionality in JavaScript too. Brian (the guy I’ve mentioned earlier) has done exactly that. He created <a href=\"https://github.com/angular/zone.js\">zone.js</a> as a port of Zones to JavaScript, which is also a dependency of Angular. Before we take a look at how we can profile our code samples with Zones, let’s first discuss how zones are created.</p>\n<p>Once we’ve embedded zone.js into our website, we have access to the global <code class=\"language-text\">zone</code> object. <code class=\"language-text\">zone</code> comes with a method <code class=\"language-text\">run()</code> that takes a function which should be executed in that zone. In other words, if we’d like to run our code in a zone, we can already do it likes this:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>doSomething<span class=\"token punctuation\">,</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">bar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">baz</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nzone<span class=\"token punctuation\">.</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span>main<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Okay cool. But what’s the point of this? Well… currently there’s in fact no difference in the outcome, except that we had to write slightly more code. However, at this point, our code runs in a zone (another execution context) and as we learned earlier, Zones can perform an operation each time our code enters or exits a zone.</p>\n<p>In order to set up these hooks, we need to <strong>fork</strong> the current zone. Forking a zone returns a new zone, which basically inherits from the “parent” zone. However, forking a zone also allows us to extend the returning zone’s behaviour. We can fork a zone by calling <code class=\"language-text\">.fork()</code> on the <code class=\"language-text\">zone</code> object. Here’s what that could look like:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> myZone <span class=\"token operator\">=</span> zone<span class=\"token punctuation\">.</span><span class=\"token function\">fork</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nmyZone<span class=\"token punctuation\">.</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span>main<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>This really just gives us a new zone with the same power of the original zone (which we haven’t discussed just yet). Let’s try out these hooks we’ve mentioned and extend our new zone. Hooks are defined using a <code class=\"language-text\">ZoneSpecification</code> that we can pass to <code class=\"language-text\">fork()</code>. We can take advantage of the following hooks:</p>\n<ul>\n<li><strong>onZoneCreated</strong> - Runs when zone is forked</li>\n<li><strong>beforeTask</strong> - Runs before a function called with <code class=\"language-text\">zone.run</code> is executed</li>\n<li><strong>afterTask</strong> - Runs after a function in the zone runs</li>\n<li><strong>onError</strong> - Runs when a function passed to <code class=\"language-text\">zone.run</code> will throw</li>\n</ul>\n<p>Here’s our code sample with an extended zone that logs before and after each task is executed:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> myZoneSpec <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function-variable function\">beforeTask</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Before task'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">afterTask</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'After task'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> myZone <span class=\"token operator\">=</span> zone<span class=\"token punctuation\">.</span><span class=\"token function\">fork</span><span class=\"token punctuation\">(</span>myZoneSpec<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nmyZone<span class=\"token punctuation\">.</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span>main<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Logs:</span>\n<span class=\"token comment\">// Before task</span>\n<span class=\"token comment\">// After task</span>\n<span class=\"token comment\">// Before task</span>\n<span class=\"token comment\">// Async task</span>\n<span class=\"token comment\">// After task</span></code></pre></div>\n<p>Oh wait! What’s that? Both hooks are executed twice? Why is that? Sure, we’ve learned that <code class=\"language-text\">zone.run</code> is obviously considered a “task” which is why the first two messages are logged. But it seems like the <code class=\"language-text\">setTimeout()</code> call is treated as a task too. How is that possible?</p>\n<h2>Monkey-patched Hooks</h2>\n<p>It turns out that there are a few other hooks. In fact, those aren’t just hooks, but monkey-patched methods on the global scope. As soon as we embed <code class=\"language-text\">zone.js</code> in our site, pretty much all methods that cause asynchronous operations are monkey-patched to run in a new zone.</p>\n<p>For example, when we call <code class=\"language-text\">setTimeout()</code> we actually call <code class=\"language-text\">Zone.setTimeout()</code>, which in turn creates a new zone using <code class=\"language-text\">zone.fork()</code> in which the given handler is executed. And that’s why our hooks are executed as well, because the forked zone in which the handler will be executed, simply inherits from the parent zone.</p>\n<p>There are some other methods that <code class=\"language-text\">zone.js</code> overrides by default and provides us as hooks:</p>\n<ul>\n<li><code class=\"language-text\">Zone.setInterval()</code></li>\n<li><code class=\"language-text\">Zone.alert()</code></li>\n<li><code class=\"language-text\">Zone.prompt()</code></li>\n<li><code class=\"language-text\">Zone.requestAnimationFrame()</code></li>\n<li><code class=\"language-text\">Zone.addEventListener()</code></li>\n<li><code class=\"language-text\">Zone.removeEventListener()</code></li>\n</ul>\n<p>We might wonder why methods like <code class=\"language-text\">alert()</code> and <code class=\"language-text\">prompt()</code> are patched as well. As mentioned earlier, those patched methods are hooks at the same time. We can change and extend them by forking a zone exactly the same way we did with <code class=\"language-text\">beforeTask</code> and <code class=\"language-text\">afterTask</code>. This turns out to be super powerful, because we can intercept calls to <code class=\"language-text\">alert()</code> and <code class=\"language-text\">prompt()</code> and change their behaviour when we write tests.</p>\n<p><code class=\"language-text\">zone.js</code> comes with a tiny DSL that allows you to augment zone hooks. The project’s <a href=\"https://github.com/angular/zone.js#augmenting-a-zones-hook\">readme</a> is probably the best place to take a look at, if you’re interested in this particular thing.</p>\n<h2>Creating a Profiling Zone</h2>\n<p>Our original problem was that we couldn’t capture the execution time of asynchronous tasks inside our code. Now with Zones and the provided APIs we’ve learned about, we have actually everything we need to create a zone that profiles the CPU time of our asynchronous tasks. Luckily, such an implementation of a profiling zone is already available as an example in the <code class=\"language-text\">zone.js</code> repository and you can find it <a href=\"https://github.com/angular/zone.js/tree/master/example/profiling.html\">here</a>.</p>\n<p>Here’s what it looks like:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> profilingZone <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> time <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n      timer <span class=\"token operator\">=</span> performance <span class=\"token operator\">?</span>\n                  performance<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span>performance<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span>\n                  Date<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span>Date<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">beforeTask</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>start <span class=\"token operator\">=</span> <span class=\"token function\">timer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">afterTask</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      time <span class=\"token operator\">+=</span> <span class=\"token function\">timer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>start<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">time</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">floor</span><span class=\"token punctuation\">(</span>time<span class=\"token operator\">*</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">100</span> <span class=\"token operator\">+</span> <span class=\"token string\">'ms'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">reset</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      time <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Pretty much the same code as the one we started off with at the beginning of this article, just wrapped in a zone specification. The example also adds a <code class=\"language-text\">.time()</code> and <code class=\"language-text\">.reset()</code> method to the zone, which can be invoked on the zone object like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">zone\n  <span class=\"token punctuation\">.</span><span class=\"token function\">fork</span><span class=\"token punctuation\">(</span>profilingZone<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">fork</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token string\">'+afterTask'</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Took: '</span> <span class=\"token operator\">+</span> zone<span class=\"token punctuation\">.</span><span class=\"token function\">time</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span>main<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>The <code class=\"language-text\">+</code> syntax is a shorthand DSL that allows us to extend the parent zone’s hook. Neat ha?</p>\n<p>There’s also a <a href=\"https://github.com/angular/zone.js/tree/master/lib/zones/long-stack-trace.ts\">LongStackTraceZone</a> we can take advantage of and even more <a href=\"https://github.com/angular/zone.js/tree/master/example/profiling.html\">examples</a>. Make sure to check those out too!</p>\n<p>Watch out for more articles as we’re going to discuss very soon what role Zones play in the Angular framework. Find more useful and related links below.</p>","frontmatter":{"author":"pascal_precht","title":"Understanding Zones","imageUrl":null,"date":"22 January 2016","summary":"Since version 2.x Angular takes advantage of a feature called Zones. Learn here what they are and how they work.","categories":["angular"]}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/angular/2016/01/22/understanding-zones.html","previous":{"fields":{"slug":"/angular/2016/01/07/taking-advantage-of-observables-in-angular2-pt2.html"},"frontmatter":{"date":"2016/01/07","title":"Taking advantage of Observables in Angular 2 - Part 2","categories":["angular"]}},"next":{"fields":{"slug":"/angular/2016/02/01/zones-in-angular-2.html"},"frontmatter":{"date":"2016/02/01","title":"Zones in Angular","categories":["angular"]}}}}}