{"componentChunkName":"component---src-templates-blog-post-js","path":"/angular/2016/05/13/angular-2-providers-using-map-literals.html","webpackCompilationHash":"0c5d630095500f933ccd","result":{"data":{"site":{"siteMetadata":{"title":"Articles by thoughtram","authors":[{"id":"pascal_precht","name":"Pascal Precht","twitter":"PascalPrecht","img":"https://avatars2.githubusercontent.com/u/445106?s=460&v=4"},{"id":"christoph_burgdorf","name":"Christoph Burgdorf","twitter":"cburgdorf","img":"https://avatars0.githubusercontent.com/u/521109?s=460&v=4"},{"id":"dominic_elm","name":"Dominic Elm","twitter":"d3lm","img":"https://avatars0.githubusercontent.com/u/12571019?s=400&v=4"},{"id":"thomas_burleson","name":"Thomas Burleson","twitter":"thomasburleson","img":"https://avatars3.githubusercontent.com/u/210413?s=400&v=4"},{"id":"elvira_eulitz","name":"Elvira Eulitz","twitter":"ElviraEulitz","img":"https://avatars3.githubusercontent.com/u/29247040?s=400&v=4"},{"id":"maxim_koretskyi","name":"Maxim Koretskyi","twitter":"maxim_koretskyi","img":"https://avatars3.githubusercontent.com/u/6124091?s=400&v=4"}]}},"markdownRemark":{"id":"ff877d01-684c-5d7f-a51f-a1b370e588c1","excerpt":"ng-conf happened just one week ago and there were many announcements about all things Angular. While this is good, sometimes these big announcements cause…","html":"<p>ng-conf happened just one week ago and there were many announcements about all things Angular. While this is good, sometimes these big announcements cause smaller features to remain unseen, because nobody really talks about them. That’s why we want to discuss providers using Map literals in this article, which is basically a new way of defining providers that landed just recently in the code base.</p>\n<h2>Provider recap</h2>\n<p>So what is it all about? Well, if you’ve read our articles on <a href=\"/angular/2015/05/18/dependency-injection-in-angular-2.html\">Dependency Injection in Angular</a>, you know that an injector needs something called a provider, that knows how to create an object of a certain type, or for a specific token.</p>\n<p>In other words, if we ask for a service dependency in one of our components like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Component <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/core'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> MyService <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./my-service.service'</span><span class=\"token punctuation\">;</span>\n\n@<span class=\"token function\">Component</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  selector<span class=\"token punctuation\">:</span> <span class=\"token string\">'my-component'</span><span class=\"token punctuation\">,</span>\n  template<span class=\"token punctuation\">:</span> <span class=\"token string\">'{{myService.sayHello()}}'</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">MyComponent</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token keyword\">private</span> myService<span class=\"token punctuation\">:</span> MyService</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>We would run into an error, because even though, we import <code class=\"language-text\">MyService</code> and use that type to annotate our constructor parameter, there’s nothing that tells Angular (or the injector) what to do, when someone asks for something of that type. Of course, Angular could simply automagically call <code class=\"language-text\">new</code> on the given type and that’s it, but then there’s no way to replace the actual dependency with an object of a different type, or maybe even the way we want to construct a dependency (class vs. factory vs. value).</p>\n<p>That’s why Angular has the concept of providers, which basically act as a sort of recipe that describe how an object of a certain type is created.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Component <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/core'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> MyService <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./my-service.service'</span><span class=\"token punctuation\">;</span>\n@<span class=\"token function\">Component</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  selector<span class=\"token punctuation\">:</span> <span class=\"token string\">'my-component'</span><span class=\"token punctuation\">,</span>\n  template<span class=\"token punctuation\">:</span> <span class=\"token string\">'{{myService.sayHello()}}'</span><span class=\"token punctuation\">,</span>\n  providers<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>MyService<span class=\"token punctuation\">]</span> <span class=\"token comment\">// creates a provider for MyService</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">MyComponent</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token keyword\">private</span> myService<span class=\"token punctuation\">:</span> MyService</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>You might know that adding a provider as shown above is actually a shorthand syntax for developer ergonomics. The same logic can be expressed with this more verbose syntax:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> provide <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/core'</span><span class=\"token punctuation\">;</span>\n\n@<span class=\"token function\">Component</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n  providers<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token function\">provide</span><span class=\"token punctuation\">(</span>MyService<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useClass<span class=\"token punctuation\">:</span> MyService <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">MyComponent</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>This enables us to create objects of different types, or even use completely different ways of constructing objects like using a factory function, or simply injecting a value.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// creates instance of MyOtherService</span>\n<span class=\"token function\">provide</span><span class=\"token punctuation\">(</span>MyService<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useClass<span class=\"token punctuation\">:</span> MyOtherService <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// uses a factory function to create a dependency</span>\n<span class=\"token function\">provide</span><span class=\"token punctuation\">(</span>MyService<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token function-variable function\">useFactory</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> foo<span class=\"token punctuation\">:</span> <span class=\"token string\">'bar'</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// injects a simple value</span>\n<span class=\"token function\">provide</span><span class=\"token punctuation\">(</span>MyService<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useValue<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>This is already pretty cool and powerful, because we can control what gets injected where in our application, without changing the application code itself.</p>\n<h2>Providers using Map Literals</h2>\n<p>As mentioned earlier, there’s a little change that makes the more verbose syntax a bit more ergonomic again. We can now define providers using Map literals. A Map literal, in TypeScript (or JavaScript) is really just an object hash. So instead of using the <code class=\"language-text\">provide()</code> function (which we need to import first), to create a provider, we can configure our providers using simple object structures.</p>\n<p>Here’s one of our earlier snippets, but this time we use Map literals:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">@<span class=\"token function\">Component</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  selector<span class=\"token punctuation\">:</span> <span class=\"token string\">'my-component'</span><span class=\"token punctuation\">,</span>\n  template<span class=\"token punctuation\">:</span> <span class=\"token string\">'{{myService.sayHello()}}'</span><span class=\"token punctuation\">,</span>\n  providers<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span> provide<span class=\"token punctuation\">:</span> MyService<span class=\"token punctuation\">,</span> useClass<span class=\"token punctuation\">:</span> MyOtherService <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">MyComponent</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token keyword\">private</span> myService<span class=\"token punctuation\">:</span> MyService</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Keep in mind that this is not a breaking change that has been introduced. It’s an additional syntax we can take advantage of. If you’re into saving key strokes, you might want to prefer Map literals over <code class=\"language-text\">provide()</code>.</p>","frontmatter":{"author":"pascal_precht","title":"Angular Providers using Map Literals","imageUrl":{"childImageSharp":{"sizes":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAABQUlEQVQoz6WT21KDQBBE951bMBCIEn0WhYqy3EIkIP7/L43Ty0WgYqosH07tsjvpaXqICIqW7rML7dMLOW8V6c8J6aHsV4Uk4yW9CurWZwKCj+UnYXXfK7IHnJwbZDXdJWcyVg1Uw/B6IwFnT6eOHvKG7LggmwW8qiPv3JFbNEp0V7aqwVZ+qAb2sfzVsYDQgR2CHRdv4pxMRkfBgBFlCrV/zaYfa+xYY8fazLGwuNBPazrwK4+iaIII9nyOXH12hjPg8vN4D7BHHeKaBLExwdAdq8WYK6zZOqe/HzLcxOUkYi7ySKfw/4Kw5Rc5SU3B9BoNecgSmYU/+dxiMWUrynkQBQvkaiBWVJCpKNl1ribfn/eMz6gfo5iLCrjBh+3LWoXvSv58kpbmzjE0D3ccfDAMYRzY9nhaCo6fwH+Y/2u+AVbeQXzQKs7SAAAAAElFTkSuQmCC","aspectRatio":1.8603174603174604,"src":"/static/653020140e875db96c29b977cec7e8f3/b80d4/angular-2-providers-using-map-literals.png","srcSet":"/static/653020140e875db96c29b977cec7e8f3/d9446/angular-2-providers-using-map-literals.png 158w,\n/static/653020140e875db96c29b977cec7e8f3/2f6e7/angular-2-providers-using-map-literals.png 315w,\n/static/653020140e875db96c29b977cec7e8f3/b80d4/angular-2-providers-using-map-literals.png 586w","sizes":"(max-width: 586px) 100vw, 586px"}}},"date":"13 May 2016","summary":"Angular has a shorter syntax for creating providers. In this article we're going to take a look at how to create them using map literals.","categories":["angular"]}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/angular/2016/05/13/angular-2-providers-using-map-literals.html","previous":{"fields":{"slug":"/announcements/2016/04/15/updates-and-announcements.html"},"frontmatter":{"date":"2016/04/15","title":"Updates and announcements","categories":["announcements"]}},"next":{"fields":{"slug":"/angular/2016/05/16/exploring-rx-operators-map.html"},"frontmatter":{"date":"2016/05/16","title":"Exploring Rx Operators: map","categories":["angular"]}}}}}