{"componentChunkName":"component---src-templates-blog-post-js","path":"/angular/2016/10/10/resolving-route-data-in-angular-2.html","webpackCompilationHash":"0c5d630095500f933ccd","result":{"data":{"site":{"siteMetadata":{"title":"Articles by thoughtram","authors":[{"id":"pascal_precht","name":"Pascal Precht","twitter":"PascalPrecht","img":"https://avatars2.githubusercontent.com/u/445106?s=460&v=4"},{"id":"christoph_burgdorf","name":"Christoph Burgdorf","twitter":"cburgdorf","img":"https://avatars0.githubusercontent.com/u/521109?s=460&v=4"},{"id":"dominic_elm","name":"Dominic Elm","twitter":"d3lm","img":"https://avatars0.githubusercontent.com/u/12571019?s=400&v=4"},{"id":"thomas_burleson","name":"Thomas Burleson","twitter":"thomasburleson","img":"https://avatars3.githubusercontent.com/u/210413?s=400&v=4"},{"id":"elvira_eulitz","name":"Elvira Eulitz","twitter":"ElviraEulitz","img":"https://avatars3.githubusercontent.com/u/29247040?s=400&v=4"},{"id":"maxim_koretskyi","name":"Maxim Koretskyi","twitter":"maxim_koretskyi","img":"https://avatars3.githubusercontent.com/u/6124091?s=400&v=4"}]}},"markdownRemark":{"id":"0562ce05-b536-56a5-ae61-f00eebbed4b7","excerpt":"Not long ago, we wrote about Navigation Guards and how they let us control the navigation flow of our application’s users. Guards like ,  and  are great when it…","html":"<p>Not long ago, we wrote about <a href=\"/angular/2016/07/18/guards-in-angular-2.html\">Navigation Guards</a> and how they let us control the navigation flow of our application’s users. Guards like <code class=\"language-text\">CanActivate</code>, <code class=\"language-text\">CanDeactivate</code> and <code class=\"language-text\">CanLoad</code> are great when it comes to taking the decision if a user is allowed to activate a certain route, leaving a certain route, or even asynchronously loading a route.</p>\n<p>However, one thing that these guards don’t allow us to do, is to ensure that certain data is loaded before a route is actually activated. For example, in a contacts application where we’re able to click on a contact to view a contact’s details, the contact data should’ve been loaded before the component we’re routing to is instantiated, otherwise we might end up with a UI that already renders its view and a few moments later, the actual data arrives (of course, there are many ways to get around this). <strong>Route resolvers</strong> allow us to do exactly that and in this article we’re going to explore how they work!</p>\n<h2>Understanding the problem</h2>\n<p>Let’s just stick with the scenario of a contacts application. We have a route for a contacts list, and a route for contacts details. Here’s what the route configuration might look like:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Routes <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/router'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> ContactsListComponent <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./contacts-list'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> ContactsDetailComponent <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./contacts-detail'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> AppRoutes<span class=\"token punctuation\">:</span> Routes <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span> path<span class=\"token punctuation\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span> component<span class=\"token punctuation\">:</span> ContactsListComponent <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> path<span class=\"token punctuation\">:</span> <span class=\"token string\">'contact/:id'</span><span class=\"token punctuation\">,</span> component<span class=\"token punctuation\">:</span> ContactsDetailComponent <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>And of course, we use that configuration to configure the router for our application:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> NgModule <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/core'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> BrowserModule <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/platform-browser'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> RouterModule <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/router'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> AppRoutes <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./app.routes'</span><span class=\"token punctuation\">;</span>\n\n@<span class=\"token function\">NgModule</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  imports<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    BrowserModule<span class=\"token punctuation\">,</span>\n    RouterModule<span class=\"token punctuation\">.</span><span class=\"token function\">forRoot</span><span class=\"token punctuation\">(</span>AppRoutes<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AppModule</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span></code></pre></div>\n<p>Nothing special going on here. However, if this is all new to you, you might want to read our <a href=\"/angular/2016/06/14/routing-in-angular-2-revisited.html\">article on routing</a>.</p>\n<p>Let’s take a look at the <code class=\"language-text\">ContactsDetailComponent</code>. This component is responsible of displaying contact data, so it somehow has to get access to a contact object, that matches the <code class=\"language-text\">id</code> provided in the route URL (hence the <code class=\"language-text\">:id</code> parameter in the route configuration). In our article on routing in Angular, we’ve learned that we can easily <a href=\"/angular/2016/06/14/routing-in-angular-2-revisited.html#access-route-parameters\">access route parameters</a> using the <code class=\"language-text\">ActivatedRoute</code> like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Component<span class=\"token punctuation\">,</span> OnInit <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/core'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> ActivatedRoute <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/router'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> ContactsService <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../contacts.service'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Contact <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../interfaces/contact'</span><span class=\"token punctuation\">;</span>\n\n@<span class=\"token function\">Component</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  selector<span class=\"token punctuation\">:</span> <span class=\"token string\">'contacts-detail'</span><span class=\"token punctuation\">,</span>\n  template<span class=\"token punctuation\">:</span> <span class=\"token string\">'...'</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ContactsDetailComponent</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">OnInit</span> <span class=\"token punctuation\">{</span>\n\n  contact<span class=\"token punctuation\">:</span> Contact<span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>\n    <span class=\"token parameter\"><span class=\"token keyword\">private</span> contactsService<span class=\"token punctuation\">:</span> ContactsService<span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">private</span> route<span class=\"token punctuation\">:</span> ActivatedRoute</span>\n  <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">ngOnInit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> id <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>route<span class=\"token punctuation\">.</span>snapshot<span class=\"token punctuation\">.</span>paramMap<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'id'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>contactsService<span class=\"token punctuation\">.</span><span class=\"token function\">getContact</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">contact</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>contact <span class=\"token operator\">=</span> contact<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Okay, cool. So the only thing <code class=\"language-text\">ContactsDetailComponent</code> does, is to fetch a contact object by the given id and assign that object to its local <code class=\"language-text\">contact</code> property, which then allows us to interpolate expressions like <code class=\"language-text\">{%raw%}{{contact.name}}{%endraw%}</code> in the template of the component.</p>\n<p>Let’s take a look at the component’s template:</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">></span></span>{{contact?.name}}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dl</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dt</span><span class=\"token punctuation\">></span></span>Phone<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dt</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dd</span><span class=\"token punctuation\">></span></span>{{contact?.phone}}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dd</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dt</span><span class=\"token punctuation\">></span></span>Website<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dt</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dd</span><span class=\"token punctuation\">></span></span>{{contact?.website}}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dd</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dl</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>Notice that we’ve attached Angular’s Safe Navigation Operator to all of our expressions that rely on <code class=\"language-text\">contact</code>. The reason for that is, that <code class=\"language-text\">contact</code> will be undefined at the time this component is initialized, since we’re fetching the data asynchronously. The Safe Navigation Operator ensures that Angular won’t throw any errors when we’re trying to read from an object that is <code class=\"language-text\">null</code> or <code class=\"language-text\">undefined</code>.</p>\n<p>In order to demonstrate this issue, let’s assume <code class=\"language-text\">ContactsService#getContact()</code> takes 3 seconds until it emits a contact object. In fact, we can easily fake that delay right away like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Injectable <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/core'</span><span class=\"token punctuation\">;</span>\n\n@<span class=\"token function\">Injectable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ContactsService</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token function\">getContact</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">id</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> Observable<span class=\"token punctuation\">.</span><span class=\"token function\">of</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      id<span class=\"token punctuation\">:</span> id<span class=\"token punctuation\">,</span>\n      name<span class=\"token punctuation\">:</span> <span class=\"token string\">'Pascal Precht'</span><span class=\"token punctuation\">,</span>\n      website<span class=\"token punctuation\">:</span> <span class=\"token string\">'http://thoughtram.io'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">delay</span><span class=\"token punctuation\">(</span><span class=\"token number\">3000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Depending on our template, adding Safe Navigation Operators everywhere can be quite tiring as well. In addition to that, some constructs don’t support that operator, like <code class=\"language-text\">NgModel</code> and <code class=\"language-text\">RouterLink</code> directives. Let’s take a look at how we can solve this using route resolvers.</p>\n<h2>Defining resolvers</h2>\n<p>As mentioned ealier, route resolvers allow us to provide the needed data for a route, before the route is activated. There are different ways to create a resolver and we’ll start with the easiest: a function. A resolver is a function that returns either <code class=\"language-text\">Observable&lt;any&gt;</code>, <code class=\"language-text\">Promise&lt;any&gt;</code> or just data. This is great, because our <code class=\"language-text\">ContactsService#getContact()</code> method returns an <code class=\"language-text\">Observable&lt;Contact&gt;</code>.</p>\n<p>Resolvers need to be registered via providers. Our article on <a href=\"/angular/2015/05/18/dependency-injection-in-angular-2.html\">Dependency Injection in Angular</a> explains nicely how to make functions available via DI.</p>\n<p>Here’s a resolver function that resolves with a static contact object:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">@<span class=\"token function\">NgModule</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n  providers<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    ContactsService<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      provide<span class=\"token punctuation\">:</span> <span class=\"token string\">'contact'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function-variable function\">useValue</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n          id<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n          name<span class=\"token punctuation\">:</span> <span class=\"token string\">'Some Contact'</span><span class=\"token punctuation\">,</span>\n          website<span class=\"token punctuation\">:</span> <span class=\"token string\">'http://some.website.com'</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AppModule</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span></code></pre></div>\n<p>Let’s ignore for a second that we don’t always want to return the same contact object when this resolver is used. The point here is that we can register a simple resolver function using Angular’s dependency injection. Now, how do we attach this resolver to a route configuration? That’s pretty straight forward. All we have to do is add a <code class=\"language-text\">resolve</code> property to a route configuration, which is an object where each key points to a resolver.</p>\n<p>Here’s how we add our resolver function to our route configuration:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> AppRoutes<span class=\"token punctuation\">:</span> Routes <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token operator\">...</span>\n  <span class=\"token punctuation\">{</span> \n    path<span class=\"token punctuation\">:</span> <span class=\"token string\">'contact/:id'</span><span class=\"token punctuation\">,</span>\n    component<span class=\"token punctuation\">:</span> ContactsDetailComponent<span class=\"token punctuation\">,</span>\n    resolve<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      contact<span class=\"token punctuation\">:</span> <span class=\"token string\">'contact'</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>That’s it? Yes! <code class=\"language-text\">&#39;contact&#39;</code> is the provider token we refer to when attaching resolvers to route configurations. Of course, this can also be an <a href=\"/angular/2016/05/23/opaque-tokens-in-angular-2.html\">OpaqueToken</a>, or a class (as discussed later).</p>\n<p>Now, the next thing we need to do is to change the way <code class=\"language-text\">ContactsDetailComponent</code> gets hold of the contact object. Everything that is resolved via route resolvers is exposed on an <code class=\"language-text\">ActivatedRoute</code>’s <code class=\"language-text\">data</code> property. In other words, for now we can get rid of the <code class=\"language-text\">ContactsService</code> dependency like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">@<span class=\"token function\">Component</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ContactsDetailComponent</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">OnInit</span> <span class=\"token punctuation\">{</span>\n\n  contact<span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token keyword\">private</span> route<span class=\"token punctuation\">:</span> ActivatedRoute</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">ngOnInit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>contact <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>route<span class=\"token punctuation\">.</span>snapshot<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">[</span><span class=\"token string\">'contact'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>In fact, when defining a resolver as a function, we get access to the <code class=\"language-text\">ActivatedRouteSnapshot</code>, as well as the <code class=\"language-text\">RouterStateSnapshot</code> like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">@<span class=\"token function\">NgModule</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n  providers<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    ContactsService<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      provide<span class=\"token punctuation\">:</span> <span class=\"token string\">'contact'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function-variable function\">useValue</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">route<span class=\"token punctuation\">:</span> ActivatedRouteSnapshot<span class=\"token punctuation\">,</span> state<span class=\"token punctuation\">:</span> RouterStateSnapshot</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token operator\">...</span>\n      <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AppModule</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span></code></pre></div>\n<p>This is useful in many scenarios where we need access to things like router parameters, which we actually do. However, we also need a <code class=\"language-text\">ContactsService</code> instance, which we <strong>don’t</strong> get injected here. So how do we create resolver that need dependency injection?</p>\n<h2>Resolvers with dependencies</h2>\n<p>As we know, dependency injection works on class constructors, so what we need is a class. We can create resolvers as classes as well! The only thing we need to do, is to implement the <code class=\"language-text\">Resolve</code> interface, which ensures that our resolver class has a <code class=\"language-text\">resolve()</code> method. This <code class=\"language-text\">resolve()</code> method is pretty much the same function we have currently registered via DI.</p>\n<p>Here’s what our contact resolver could look like as a class implementation:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Injectable <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/core'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Resolve<span class=\"token punctuation\">,</span> ActivatedRouteSnapshot <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/router'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> ContactsService <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./contacts.service'</span><span class=\"token punctuation\">;</span>\n\n@<span class=\"token function\">Injectable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ContactResolve</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Resolve</span><span class=\"token operator\">&lt;</span>Contact<span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token keyword\">private</span> contactsService<span class=\"token punctuation\">:</span> ContactsService</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">route<span class=\"token punctuation\">:</span> ActivatedRouteSnapshot</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>contactsService<span class=\"token punctuation\">.</span><span class=\"token function\">getContact</span><span class=\"token punctuation\">(</span>route<span class=\"token punctuation\">.</span>paramMap<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'id'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>As soon as our resolver is a class, our provider configuration becomes simpler as well, because the class can be used as provider token!</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">@<span class=\"token function\">NgModule</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n  providers<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    ContactsService<span class=\"token punctuation\">,</span>\n    ContactResolve\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AppModule</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span></code></pre></div>\n<p>And of course, we use the same token to configure the resolver on our routes:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">export const AppRoutes: Routes = [\n  ...\n  { \n    path: &#39;contact/:id&#39;,\n    component: ContactsDetailComponent,\n    resolve: {\n      contact: ContactResolve\n    }\n  }\n];</code></pre></div>\n<p>Angular is smart enough to detect if a resolver is a function or a class and if it’s a class, it’ll call <code class=\"language-text\">resolve()</code> on it.</p>\n<p>Hopefully this gave you a better idea of how route resolvers in Angular work!</p>","frontmatter":{"author":"pascal_precht","title":"Resolving route data in Angular","imageUrl":{"childImageSharp":{"sizes":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAMBAgQF/8QAFgEBAQEAAAAAAAAAAAAAAAAAAQAC/9oADAMBAAIQAxAAAAHl6Uw4SWI//8QAGRAAAgMBAAAAAAAAAAAAAAAAAQIAAxAR/9oACAEBAAEFAkcobLgw7BDn/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGBAAAgMAAAAAAAAAAAAAAAAAABECICL/2gAIAQEABj8CZmCr/8QAGxAAAgMAAwAAAAAAAAAAAAAAAAERIUExUZH/2gAIAQEAAT8hiK+09FRegbPR7Hnkg//aAAwDAQACAAMAAAAQ1z//xAAWEQADAAAAAAAAAAAAAAAAAAAQESH/2gAIAQMBAT8QUH//xAAVEQEBAAAAAAAAAAAAAAAAAAAQQf/aAAgBAgEBPxCn/8QAGhABAQEBAAMAAAAAAAAAAAAAAREAITFRkf/aAAgBAQABPxAEIPHUD1j8c9tZCq+5wEJo+BmTd//Z","aspectRatio":1.4992503748125936,"src":"/static/06b7134212efa859e39ab25e1054cec6/30037/resolving-route-data-in-angular-2.jpg","srcSet":"/static/06b7134212efa859e39ab25e1054cec6/10bdc/resolving-route-data-in-angular-2.jpg 158w,\n/static/06b7134212efa859e39ab25e1054cec6/f4ab0/resolving-route-data-in-angular-2.jpg 315w,\n/static/06b7134212efa859e39ab25e1054cec6/30037/resolving-route-data-in-angular-2.jpg 630w,\n/static/06b7134212efa859e39ab25e1054cec6/9810d/resolving-route-data-in-angular-2.jpg 945w,\n/static/06b7134212efa859e39ab25e1054cec6/ff2e4/resolving-route-data-in-angular-2.jpg 1260w,\n/static/06b7134212efa859e39ab25e1054cec6/883ab/resolving-route-data-in-angular-2.jpg 2000w","sizes":"(max-width: 630px) 100vw, 630px"}}},"date":"10 October 2016","summary":"We often want to make sure that certain data is available before a component is instantiated via routing. In this article you'll learn how to resolve route data.","categories":["angular"]}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/angular/2016/10/10/resolving-route-data-in-angular-2.html","previous":{"fields":{"slug":"/machine-learning/2016/09/23/beginning-ml-with-keras-and-tensorflow.html"},"frontmatter":{"date":"2016/09/23","title":"Beginning Machine Learning with Keras and TensorFlow","categories":["machine-learning"]}},"next":{"fields":{"slug":"/angular/2016/10/13/two-way-data-binding-in-angular-2.html"},"frontmatter":{"date":"2016/10/13","title":"Two-way Data Binding in Angular","categories":["angular"]}}}}}